{"ast":null,"code":"import _slicedToArray from\"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{Editor}from'@tinymce/tinymce-react';import ArticleProvider from\"../context/ArticleContext\";var RichText=function RichText(_ref){var actionType=_ref.actionType;var _useContext=useContext(ArticleProvider.Context),setSelectedImageGlobal=_useContext.setSelectedImageGlobal,selectedImageGlobal=_useContext.selectedImageGlobal,currentArticle=_useContext.currentArticle,editMode=_useContext.editMode,article=_useContext.article,updateArticle=_useContext.updateArticle,modal=_useContext.modal,setModal=_useContext.setModal;var key=\"xxx\";var _useState=useState(null),_useState2=_slicedToArray(_useState,2),myEditor=_useState2[0],setMyEditor=_useState2[1];useEffect(function(){myEditor!==null&selectedImageGlobal!==\"\"&&myEditor.insertContent('<img alt=\"Smiley face\" class=\"mce-responsive\" src=\"'+selectedImageGlobal+'\"/>');//alert(myEditor)\n},[myEditor,selectedImageGlobal]);var setUpdateModeOrNot=function setUpdateModeOrNot(){if(actionType==\"en\"&&editMode==\"update\"&&article.body_en!==null){key=Math.random();console.log(\"Editor key\",key);return article.body_en;}if(actionType==\"fr\"&&editMode==\"update\"&&article.body_fr!==null){key=Math.random();console.log(\"Editor key\",key);return article.body_fr;}return\"\";};var handleEditorChange=function handleEditorChange(content){actionType==\"en\"?updateArticle(\"body_en\",content):updateArticle(\"body_fr\",content);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Editor,{apiKey:\"mymryl9rtn2npjz2vhp3yovdx2of4phahbqil1sq29upca83\",value:setUpdateModeOrNot(),init:{height:500,menubar:false,plugins:['advlist autolink lists link image','charmap print preview anchor help','searchreplace visualblocks code','insertdatetime media table paste wordcount'],setup:function setup(editor){editor.ui.registry.addButton('gallery',{icon:'image',//image: 'http://p.yusukekamiyamane.com/icons/search/fugue/icons/calendar-blue.png',\ntooltip:\"Add Image\",onAction:function onAction(){setModal(true);setMyEditor(editor);//\n}});},toolbar:'gallery | insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent |  table | print preview ',file_browser_callback_types:'image',file_picker_callback:function file_picker_callback(callback,value,meta){if(meta.filetype=='image'){var input=document.getElementById('my-file');input.click();input.onchange=function(){var file=input.files[0];var reader=new FileReader();reader.onload=function(e){console.log('name',e.target.result);callback(e.target.result,{alt:file.name});};reader.readAsDataURL(file);};}},content_style:'img { width:100%}',image_dimensions:false,image_class_list:[{title:'None',value:'mce-responsive'}],contextmenu:'link image table',paste_data_images:true},onEditorChange:function onEditorChange(e){return handleEditorChange(e);}}));};export default RichText;","map":{"version":3,"sources":["C:/react/lac/src/editor/RichText.js"],"names":["React","useContext","useEffect","useState","Editor","ArticleProvider","RichText","actionType","Context","setSelectedImageGlobal","selectedImageGlobal","currentArticle","editMode","article","updateArticle","modal","setModal","key","myEditor","setMyEditor","insertContent","setUpdateModeOrNot","body_en","Math","random","console","log","body_fr","handleEditorChange","content","height","menubar","plugins","setup","editor","ui","registry","addButton","icon","tooltip","onAction","toolbar","file_browser_callback_types","file_picker_callback","callback","value","meta","filetype","input","document","getElementById","click","onchange","file","files","reader","FileReader","onload","e","target","result","alt","name","readAsDataURL","content_style","image_dimensions","image_class_list","title","contextmenu","paste_data_images"],"mappings":"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","sourcesContent":["import React,{useContext,useEffect,useState} from 'react';\r\nimport { Editor } from '@tinymce/tinymce-react';\r\nimport ArticleProvider from \"../context/ArticleContext\"\r\n\r\nconst RichText =({actionType})=> {\r\n  const {setSelectedImageGlobal,selectedImageGlobal,currentArticle,editMode,article,updateArticle,modal,setModal}=useContext(ArticleProvider.Context)\r\n\r\n let key=\"xxx\"\r\n\r\n\r\nconst [myEditor,setMyEditor]=useState(null)\r\n\r\n\r\n useEffect(()=>{\r\n  myEditor!==null & selectedImageGlobal!==\"\" && myEditor.insertContent('<img alt=\"Smiley face\" class=\"mce-responsive\" src=\"' + selectedImageGlobal + '\"/>')\r\n  //alert(myEditor)\r\n \r\n },\r\n [myEditor,selectedImageGlobal])\r\n\r\n  const setUpdateModeOrNot=()=>{\r\n\r\n    if(actionType==\"en\" && editMode==\"update\" && article.body_en!==null){\r\n      key=Math.random()\r\n      console.log(\"Editor key\",key)\r\n      return  article.body_en\r\n\r\n    }\r\n\r\n    if(actionType==\"fr\" && editMode==\"update\" && article.body_fr!==null){\r\n      key=Math.random()\r\n      console.log(\"Editor key\",key)\r\n      return  article.body_fr\r\n\r\n    }\r\n\r\n    return \"\"\r\n\r\n\r\n  }\r\n\r\n\r\n  const handleEditorChange = (content) => {\r\n    actionType==\"en\" ? updateArticle(\"body_en\", content):  updateArticle(\"body_fr\", content)\r\n  }\r\n\r\n  \r\n    return (\r\n      <>\r\n      {/* <input id=\"my-file\" type=\"file\" name=\"my-file\" style={{display:\"none\"}} onChange=\"\" /> */}\r\n\r\n      <Editor\r\n      \r\n      apiKey=\"mymryl9rtn2npjz2vhp3yovdx2of4phahbqil1sq29upca83\"\r\n       value={setUpdateModeOrNot()}\r\n      \r\n   \r\n        init={{\r\n          height: 500,\r\n          menubar: false,\r\n          plugins: [\r\n            'advlist autolink lists link image',\r\n            'charmap print preview anchor help',\r\n            'searchreplace visualblocks code',\r\n            'insertdatetime media table paste wordcount'\r\n          ],\r\n        \r\n        \r\n        setup:function (editor) {\r\n\r\n        editor.ui.registry.addButton('gallery', {\r\n          icon: 'image',\r\n          //image: 'http://p.yusukekamiyamane.com/icons/search/fugue/icons/calendar-blue.png',\r\n          tooltip: \"Add Image\",\r\n          onAction:()=> {\r\n            setModal(true)\r\n            setMyEditor(editor)\r\n            //\r\n            }\r\n        });\r\n    },\r\n         \r\n        toolbar: 'gallery | insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent |  table | print preview ',\r\n              \r\n              file_browser_callback_types: 'image',\r\n              file_picker_callback: function (callback, value, meta) {\r\n                if (meta.filetype == 'image') {\r\n                    var input = document.getElementById('my-file');\r\n                    input.click();\r\n                    input.onchange = function () {\r\n                        var file = input.files[0];\r\n                        var reader = new FileReader();\r\n                        reader.onload = function (e) {\r\n                            console.log('name',e.target.result);\r\n                            callback(e.target.result, {\r\n                                alt: file.name\r\n                            });\r\n                        };\r\n                        reader.readAsDataURL(file);\r\n                    };\r\n                }\r\n            },\r\n            content_style: 'img { width:100%}',\r\n            image_dimensions: false,\r\n            image_class_list: [\r\n    {title: 'None', value: 'mce-responsive'},\r\n\r\n  \r\n  ],\r\n  contextmenu: 'link image table',\r\n              paste_data_images: true,\r\n\r\n              }}\r\n\r\n        onEditorChange={(e)=>handleEditorChange(e)}\r\n\r\n        \r\n      /></>\r\n    );\r\n\r\n}\r\n\r\nexport default RichText;"]},"metadata":{},"sourceType":"module"}