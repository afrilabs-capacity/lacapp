{"ast":null,"code":"import _defineProperty from\"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{createContext,useState,useEffect}from\"react\";import{useHistory,useLocation,useParams}from\"react-router-dom\";import axios from\"axios\";import{useAlert}from'react-alert';import authHeader from\"../services/auth-header\";import urlService from\"../services/url-service\";var API_URL=urlService().baseUrl;var Context=createContext({});var initialArticle={id:null,title_en:\"\",body_en:null,featured_en:null,title_fr:\"\",body_fr:null,featured_fr:null,status:\"draft\",category:\"\",created_at:null,updated_at:null};var initialEditArticle={id:null,title_en:\"\",body_en:null,featured_en:null,title_fr:\"\",body_fr:null,featured_fr:null,status:\"draft\",category:\"\",created_at:null,updated_at:null};var initialLoginAction={func:null,params:null};var Provider=function Provider(props){// Initial values are obtained from the props\nvar history=useHistory();var _useParams=useParams(),id=_useParams.id;var location=useLocation();var alert=useAlert();var errorCount;var children=props.children;// Use State to keep the values\nvar _useState=useState(initialArticle),_useState2=_slicedToArray(_useState,2),article=_useState2[0],setArticle=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),articles=_useState4[0],setArticles=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),pagination=_useState6[0],setPagination=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),toast=_useState8[0],setToast=_useState8[1];var _useState9=useState(\"error\"),_useState10=_slicedToArray(_useState9,2),toastType=_useState10[0],setToastType=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),modal=_useState12[0],setModal=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),authModal=_useState14[0],setAuthModal=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),errors=_useState16[0],setErrors=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),selectedImageEn=_useState18[0],setSelectedImageEn=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),selectedImageFr=_useState20[0],setSelectedImageFr=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),selectedImageGlobal=_useState22[0],setSelectedImageGlobal=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),featuredFor=_useState24[0],setFeaturedFor=_useState24[1];var _useState25=useState(\"new\"),_useState26=_slicedToArray(_useState25,2),editMode=_useState26[0],setEditMode=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),currentArticle=_useState28[0],setCurrentArticle=_useState28[1];var _useState29=useState(1),_useState30=_slicedToArray(_useState29,2),currentPage=_useState30[0],setCurrentPage=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),searchPhrase=_useState32[0],setSearchPhrase=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),fetching=_useState34[0],setFetching=_useState34[1];var _useState35=useState(null),_useState36=_slicedToArray(_useState35,2),fetchingFailMsg=_useState36[0],setFetchingFailMsg=_useState36[1];var _useState37=useState(initialLoginAction),_useState38=_slicedToArray(_useState37,2),loginAction=_useState38[0],setLoginAction=_useState38[1];var _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),apiAction=_useState40[0],setApiAction=_useState40[1];// const [featuredFor,setFeaturedFor]=useState(\"\")\nuseEffect(function(){//console.log(\"id\",id)\nupdateFeatured();console.log(\"articles rebuilt\",articles[0]);console.log(\"pagination rebuilt\",pagination);console.log(\"article rebuilt\",article);},[article,articles,pagination]);var KeysToErrorArray=function KeysToErrorArray(errors){Object.keys(errors).map(function(key,index){return setErrors(function(prevError){return[].concat(_toConsumableArray(prevError),[errors[key]]);});});};var updateArticle=function updateArticle(dataKey,data){//console.log(\"data key\", dataKey) \nreturn setArticle(function(prevState){var newState=_objectSpread(_objectSpread({},prevState),{},_defineProperty({},dataKey,data));return newState;});};var updateFeatured=function updateFeatured(){//console.log(\"data key\", dataKey) \narticle.featured_en!==null&&setSelectedImageEn(article.featured_en);article.featured_fr!==null&&setSelectedImageFr(article.featured_fr);};var resetArticle=function resetArticle(){setArticle(initialArticle);setSelectedImageEn(\"\");setSelectedImageFr(\"\");setCurrentArticle(\"\");setFeaturedFor(\"\");setToast(false);};var resetEditArticle=function resetEditArticle(){setArticle(initialEditArticle);};var validateArticle=function validateArticle(){setErrors([]);setToast(false);errorCount=0;var tmpErrors=[];if(article.status==\"published\"){if(article.title_en==\"\"){tmpErrors.push(\"Please enter article title (english) before publishing as (published status)\");errorCount++;}if(article.body_en==null&article.type==\"dash\"){tmpErrors.push(\"Please enter article body (english) before publishing as (published status)\");errorCount++;}if(article.category==\"\"){tmpErrors.push(\"Please select category before publishing as (published status)\");errorCount++;}}if(article.status==\"draft\"){if(article.title_en==\"\"){tmpErrors.push(\"Please enter article title (english) before publishing as (draft status)\");errorCount++;}}errorCount>0&&setErrors(function(prevError){return[].concat(_toConsumableArray(prevError),tmpErrors);});editMode==\"new\"&&errorCount==0&&publishArticleApi();editMode==\"update\"&&errorCount==0&&updateArticleApi();};var publishArticleApi=function publishArticleApi(){setLoginAction(initialLoginAction);setAuthModal(false);setApiAction(true);axios.request({method:\"post\",headers:authHeader(),url:API_URL+\"post/new\",data:article}).then(function(response){// updateGallery([])\n//   updateGallery(prevGallery=>[\n//     ...prevGallery,...response.data.data.data.data\n//   ])\nsetEditMode(\"update\");alert.show(\"New article created\",{type:'success'});history.replace({pathname:'/posts/edit/'+response.data.data.data.id,//search: '?query=abc',\nid:response.data.data.data.id,state:{id:response.data.data.data.id,navType:\"post_save\",data:response.data.data.data}});console.log(\"post response\",response.data.data.data.id);setApiAction(false);}).catch(function(error){setErrors([]);setApiAction(false);if(error.response){if(error.response.status){switch(error.response.status){case 500:alert.show(error.response.statusText,{type:'error'});break;case 422:KeysToErrorArray(error.response.data.errors);break;case 409:KeysToErrorArray(error.response.data.errors);break;case 401://alert.show(\"Token error\",{type:'notice'})\nsetAuthModal(true);setLoginAction(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),{},{func:validateArticle});});break;default:!error.response?alert.show(\"Server currently down\",{type:'error'}):alert.show(error.response.statusText,{type:'error'});}}else{alert.show(\"Server currently down\",{type:'error'});}}else{alert.show(\"Invalid response\",{type:'error'});}});};var updateArticleApi=function updateArticleApi(){setLoginAction(initialLoginAction);setAuthModal(false);setApiAction(true);axios.request({method:\"post\",headers:authHeader(),url:API_URL+\"post/update\",data:article}).then(function(response){setEditMode(\"update\");alert.show(\"Article Updated\",{type:'success'});console.log(\"post response\",response.data.data.data.id);setApiAction(false);}).catch(function(error){setErrors([]);setApiAction(false);if(error.response){if(error.response.status){switch(error.response.status){case 500:alert.show(error.response.statusText,{type:'error'});break;case 422:KeysToErrorArray(error.response.data.errors);break;case 409:KeysToErrorArray(error.response.data.errors);break;case 401://alert.show(\"Token error\",{type:'notice'})\nsetAuthModal(true);setLoginAction(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),{},{func:validateArticle});});break;default:!error.response?alert.show(\"Server currently down\",{type:'error'}):alert.show(error.response.statusText,{type:'error'});}}else{alert.show(\"Server currently down\",{type:'error'});}}else{alert.show(\"Invalid response\",{type:'error'});}});};var fetchArticleByIdApi=function fetchArticleByIdApi(id){setLoginAction(initialLoginAction);setAuthModal(false);setApiAction(true);authHeader()!==\"\"&&axios.get(API_URL+\"post/\"+id,{headers:authHeader()}).then(function(response){setArticle(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),response.data.data.data);});console.log(\"post response\",response.data.data.data);console.log(\"all articles\",articles);setApiAction(false);}).catch(function(error){setErrors([]);setApiAction(false);if(error.response){if(error.response.status){switch(error.response.status){case 500:alert.show(error.response.statusText,{type:'error'});break;case 401://alert.show(\"Token error\",{type:'notice'})\nsetAuthModal(true);setLoginAction(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),{},{func:fetchArticleByIdApi,params:id});});break;default:!error.response?alert.show(\"Server currently down\",{type:'error'}):alert.show(error.response.statusText,{type:'error'});}}else{alert.show(\"Server currently down\",{type:'error'});}}else{alert.show(\"Invalid response\",{type:'error'});}// let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n// setErrors(prevError=>[...prevError,apiStatus])\n});};var deleteArticleApi=function deleteArticleApi(id){setLoginAction(initialLoginAction);setAuthModal(false);setApiAction(true);//setUsers([])\naxios.get(API_URL+\"post/delete/\"+id,{headers:authHeader()}).then(function(response){// setUsers(prevArticle=>{\n//   return {...prevArticle,...response.data.data.data}\n// })\n// setPagination(prevArticle=>{\n//   return {...prevArticle,...response.data.data.data}\n// })\nalert.show(\"Article Deleted\",{type:'success'});var newList=articles.filter(function(item){return item.id!==id;});setArticles(newList);//\nconsole.log(\"post response\",response.data.data.data);setApiAction(false);}).catch(function(error){setErrors([]);setApiAction(false);if(error.response){if(error.response.status){switch(error.response.status){case 500:alert.show(error.response.statusText,{type:'error'});break;case 401://alert.show(\"Token error\",{type:'notice'})\nerror.response.data.code==\"402\"&&alert.show(error.response.data.status);if(!error.response.data.code){setAuthModal(true);setLoginAction(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),{},{func:deleteArticleApi,params:id});});}break;default:!error.response?alert.show(\"Server currently down\",{type:'error'}):alert.show(error.response.statusText,{type:'error'});}}else{alert.show(\"Server currently down\",{type:'error'});}}else{//alert.show(\"Invalid response\",{type: 'error'})\n}// let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n// setErrors(prevError=>[...prevError,apiStatus])\n});};var fetchArticlesApi=function fetchArticlesApi(){setArticles([]);setFetching(true);setFetchingFailMsg(null);setAuthModal(false);setLoginAction(initialLoginAction);setApiAction(true);//alert(\"Hi there man\")\naxios.get(API_URL+\"posts\",{headers:authHeader()}).then(function(response){setArticles(function(prevArticle){return[].concat(_toConsumableArray(prevArticle),_toConsumableArray(response.data.data.data.data));});setPagination(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),response.data.data.data);});!response.data.data.data.data.length&&setFetchingFailMsg(\"No articles found\");setFetching(false);console.log(\"post response all articles\",response.data.data.data);setApiAction(false);}).catch(function(error){setErrors([]);setFetching(false);setApiAction(false);if(error.response){if(error.response.status){switch(error.response.status){case 500:alert.show(error.response.statusText,{type:'error'});break;case 401://alert.show(\"Token error\",{type:'notice'})\nsetAuthModal(true);setFetchingFailMsg(\"Waiting for authorization...\");setLoginAction(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),{},{func:fetchArticlesApi});});break;default:!error.response?alert.show(\"Server currently down\",{type:'error'}):alert.show(error.response.statusText,{type:'error'});}}else{alert.show(\"Server currently down\",{type:'error'});}}else{alert.show(\"Invalid response\",{type:'error'});}// error.response!==undefined ? setFetchingFailMsg(\"No articles found\") : setFetchingFailMsg(\"Unknown error\")\n// let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n// setErrors(prevError=>[...prevError,apiStatus])\n});};var goToPageApi=function goToPageApi(page){setArticles([]);setCurrentPage(page);setAuthModal(false);setLoginAction(initialLoginAction);setApiAction(true);setFetchingFailMsg(null);axios.get(pagination.path+\"?page=\"+page,{headers:authHeader()}).then(function(response){setArticles(function(prevArticle){return[].concat(_toConsumableArray(prevArticle),_toConsumableArray(response.data.data.data.data));});setPagination(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),response.data.data.data);});console.log(\"post response all articles\",response.data.data.data);setApiAction(false);}).catch(function(error){setErrors([]);setApiAction(false);if(error.response){if(error.response.status){switch(error.response.status){case 500:alert.show(error.response.statusText,{type:'error'});break;case 401://alert.show(\"Token error\",{type:'notice'})\nsetFetchingFailMsg(\"No articles found\");setAuthModal(true);setLoginAction(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),{},{func:goToPageApi});});break;default:!error.response?alert.show(\"Server currently down\",{type:'error'}):alert.show(error.response.statusText,{type:'error'});}}else{alert.show(\"Server currently down\",{type:'error'});}}else{alert.show(\"Invalid response\",{type:'error'});}// let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n// setErrors(prevError=>[...prevError,apiStatus])\n});};var searchByPhraseApi=function searchByPhraseApi(){setArticles([]);setFetching(true);setFetchingFailMsg(null);setAuthModal(false);setLoginAction(initialLoginAction);setApiAction(true);axios.get(API_URL+\"post/search/\"+searchPhrase,{headers:authHeader()}).then(function(response){setArticles(function(prevArticle){return[].concat(_toConsumableArray(prevArticle),_toConsumableArray(response.data.data.data.data));});setPagination(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),response.data.data.data);});setFetching(false);!response.data.data.data.length&&setFetchingFailMsg(\"No results found...\");// alert(JSON.stringify(response.data) )\nconsole.log(\"get response\",response.data.data.data);setApiAction(false);//console.log(\"all articles\",articles)\n}).catch(function(error){setErrors([]);setFetching(false);setApiAction(false);if(error.response){if(error.response.status){switch(error.response.status){case 500:alert.show(error.response.statusText,{type:'error'});break;case 401://alert.show(\"Token error\",{type:'notice'})\nsetAuthModal(true);setLoginAction(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),{},{func:searchByPhraseApi});});break;default:!error.response?alert.show(\"Server currently down\",{type:'error'}):alert.show(error.response.statusText,{type:'error'});}}else{alert.show(\"Server currently down\",{type:'error'});}}else{alert.show(\"Invalid response\",{type:'error'});}//alert(JSON.stringify(error.response))\n// error.response!==undefined ? setFetchingFailMsg(\"No articles found\") : setFetchingFailMsg(\"Unknown error\")\n});};var articleContext={article:article,articles:articles,updateArticle:updateArticle,toast:toast,setToast:setToast,modal:modal,setModal:setModal,errors:errors,validateArticle:validateArticle,selectedImageFr:selectedImageFr,selectedImageEn:selectedImageEn,setSelectedImageEn:setSelectedImageEn,setSelectedImageFr:setSelectedImageFr,setFeaturedFor:setFeaturedFor,selectedImageGlobal:selectedImageGlobal,setSelectedImageGlobal:setSelectedImageGlobal,featuredFor:featuredFor,editMode:editMode,setCurrentArticle:setCurrentArticle,setArticle:setArticle,setEditMode:setEditMode,resetArticle:resetArticle,resetEditArticle:resetEditArticle,initialEditArticle:initialEditArticle,toastType:toastType,setToastType:setToastType,fetchArticleByIdApi:fetchArticleByIdApi,fetchArticlesApi:fetchArticlesApi,pagination:pagination,goToPageApi:goToPageApi,currentPage:currentPage,searchPhrase:searchPhrase,setSearchPhrase:setSearchPhrase,searchByPhraseApi:searchByPhraseApi,setCurrentPage:setCurrentPage,fetching:fetching,fetchingFailMsg:fetchingFailMsg,authModal:authModal,setAuthModal:setAuthModal,loginAction:loginAction,apiAction:apiAction,setApiAction:setApiAction,deleteArticleApi:deleteArticleApi,initialLoginAction:initialLoginAction,setLoginAction:setLoginAction};// pass the value in provider and return\nreturn/*#__PURE__*/React.createElement(Context.Provider,Object.assign({value:articleContext},props),children);};var ArticleProvider={Provider:Provider,Context:Context};Provider.defaultProps={article:{title_en:\"\",body_en:null,featured_en:null,title_fr:\"\",body_fr:null,featured_fr:null,status:\"draft\"}};export default ArticleProvider;","map":{"version":3,"sources":["C:/react/lac/src/context/ArticleContext.js"],"names":["React","createContext","useState","useEffect","useHistory","useLocation","useParams","axios","useAlert","authHeader","urlService","API_URL","baseUrl","Context","initialArticle","id","title_en","body_en","featured_en","title_fr","body_fr","featured_fr","status","category","created_at","updated_at","initialEditArticle","initialLoginAction","func","params","Provider","props","history","location","alert","errorCount","children","article","setArticle","articles","setArticles","pagination","setPagination","toast","setToast","toastType","setToastType","modal","setModal","authModal","setAuthModal","errors","setErrors","selectedImageEn","setSelectedImageEn","selectedImageFr","setSelectedImageFr","selectedImageGlobal","setSelectedImageGlobal","featuredFor","setFeaturedFor","editMode","setEditMode","currentArticle","setCurrentArticle","currentPage","setCurrentPage","searchPhrase","setSearchPhrase","fetching","setFetching","fetchingFailMsg","setFetchingFailMsg","loginAction","setLoginAction","apiAction","setApiAction","updateFeatured","console","log","KeysToErrorArray","Object","keys","map","key","index","prevError","updateArticle","dataKey","data","prevState","newState","resetArticle","resetEditArticle","validateArticle","tmpErrors","push","type","publishArticleApi","updateArticleApi","request","method","headers","url","then","response","show","replace","pathname","state","navType","catch","error","statusText","prevArticle","fetchArticleByIdApi","get","deleteArticleApi","newList","filter","item","code","fetchArticlesApi","length","goToPageApi","page","path","searchByPhraseApi","articleContext","ArticleProvider","defaultProps"],"mappings":"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","sourcesContent":["import React, { createContext, useState,useEffect} from \"react\";\r\nimport { useHistory,useLocation,useParams } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport axios from \"axios\"\r\nimport { useAlert } from 'react-alert'\r\nimport authHeader from \"../services/auth-header\";\r\nimport urlService from \"../services/url-service\";\r\n\r\nconst API_URL = urlService().baseUrl;\r\n\r\nconst Context = createContext({});\r\n\r\nconst initialArticle={\r\n    id:null,\r\n    title_en: \"\",\r\n    body_en: null,\r\n    featured_en:null,\r\n    title_fr: \"\",\r\n    body_fr: null,\r\n    featured_fr:null,\r\n    status:\"draft\",\r\n    category:\"\",\r\n    created_at:null,\r\n    updated_at:null\r\n}\r\n\r\n\r\nconst initialEditArticle={\r\n id:null,\r\n title_en: \"\",\r\n body_en: null,\r\n featured_en:null,\r\n title_fr: \"\",\r\n body_fr: null,\r\n featured_fr:null,\r\n status:\"draft\",\r\n category:\"\",\r\n created_at:null,\r\n updated_at:null\r\n}\r\n\r\n\r\nconst initialLoginAction={func:null,params:null}\r\n\r\n const Provider = props => {\r\n  // Initial values are obtained from the props\r\n const history = useHistory();\r\n\r\nconst {id} = useParams();\r\n\r\nconst location = useLocation();\r\n\r\nconst alert = useAlert()\r\n\r\nlet errorCount\r\n\r\n\r\n \r\n  const {\r\n    // article:initialArticle,\r\n    children\r\n  } = props;\r\n\r\n  // Use State to keep the values\r\n  const [article,setArticle] = useState(initialArticle);\r\n  const [articles,setArticles] = useState([]);\r\n  const [pagination,setPagination] = useState({});\r\n  const [toast,setToast]=useState(false)\r\n  const [toastType,setToastType]=useState(\"error\")\r\n  const [modal,setModal]=useState(false)\r\n  const [authModal,setAuthModal] = useState(false)\r\n  const [errors,setErrors]=useState([])\r\n  const [selectedImageEn,setSelectedImageEn]=useState(\"\")\r\n  const [selectedImageFr,setSelectedImageFr]=useState(\"\")\r\n  const [selectedImageGlobal,setSelectedImageGlobal]=useState(\"\")\r\n  const [featuredFor,setFeaturedFor]=useState(\"\")\r\n  const [editMode,setEditMode]=useState(\"new\")\r\n  const [currentArticle,setCurrentArticle]=useState(\"\")\r\n  const [currentPage,setCurrentPage]=useState(1)\r\n  const [searchPhrase,setSearchPhrase]=useState(\"\")\r\n  const [fetching,setFetching]=useState(false)\r\n  const [fetchingFailMsg,setFetchingFailMsg]=useState(null)\r\n  const [loginAction,setLoginAction] =useState(initialLoginAction)\r\n  const [apiAction,setApiAction] =useState(false)\r\n\r\n\r\n  // const [featuredFor,setFeaturedFor]=useState(\"\")\r\n\r\n  useEffect(()=>{\r\n//console.log(\"id\",id)\r\nupdateFeatured()\r\nconsole.log(\"articles rebuilt\",articles[0])\r\nconsole.log(\"pagination rebuilt\",pagination)\r\nconsole.log(\"article rebuilt\",article)\r\n  },[article,articles,pagination])\r\n\r\n\r\n  const KeysToErrorArray=(errors)=>{\r\n    Object.keys(errors).map((key, index)=> setErrors(prevError=>[...prevError,errors[key]]))\r\n   }\r\n  \r\n\r\n  const updateArticle=(dataKey,data)=> \r\n  {\r\n     //console.log(\"data key\", dataKey) \r\n    return setArticle(prevState => { \r\n         let newState=({...prevState,[dataKey]: data})\r\n          return newState\r\n        })  \r\n  }\r\n\r\n  const updateFeatured=()=> \r\n  {\r\n     //console.log(\"data key\", dataKey) \r\n     article.featured_en!==null && setSelectedImageEn( article.featured_en)\r\n\r\n     article.featured_fr!==null && setSelectedImageFr( article.featured_fr)\r\n    \r\n  }\r\n  \r\n  const resetArticle=()=> \r\n  {\r\n    setArticle(initialArticle)\r\n    setSelectedImageEn(\"\")\r\n    setSelectedImageFr(\"\")\r\n    setCurrentArticle(\"\")\r\n    setFeaturedFor(\"\")\r\n    setToast(false)\r\n  }\r\n\r\n\r\n\r\n  const resetEditArticle=()=> \r\n  {\r\n    setArticle(initialEditArticle)\r\n  }\r\n\r\n\r\n  const validateArticle= ()=>{\r\n      setErrors([])\r\n      setToast(false)\r\n      errorCount=0\r\n      let tmpErrors=[]\r\n        if(article.status==\"published\"){\r\n        if(article.title_en==\"\"){\r\n          tmpErrors.push(\"Please enter article title (english) before publishing as (published status)\")\r\n           errorCount++\r\n        }\r\n\r\n        if(article.body_en==null & article.type==\"dash\"){\r\n          tmpErrors.push(\"Please enter article body (english) before publishing as (published status)\")\r\n          errorCount++\r\n        } \r\n\r\n        if(article.category==\"\"){\r\n          tmpErrors.push(\"Please select category before publishing as (published status)\")\r\n          errorCount++\r\n      } \r\n\r\n       \r\n\r\n        }\r\n\r\n        if(article.status==\"draft\"){\r\n            if(article.title_en==\"\"){\r\n              tmpErrors.push(\"Please enter article title (english) before publishing as (draft status)\")\r\n          errorCount++\r\n               \r\n            } \r\n            \r\n           \r\n        }\r\n\r\n       \r\n        errorCount>0 && setErrors(prevError=>[...prevError,...tmpErrors])\r\n\r\n       editMode==\"new\" && errorCount==0 && publishArticleApi()\r\n\r\n       editMode==\"update\" && errorCount==0 && updateArticleApi()\r\n       \r\n        \r\n\r\n  }\r\n  \r\n\r\n  const publishArticleApi =()=>{\r\n\r\n    setLoginAction(initialLoginAction)\r\n    setAuthModal(false)\r\n    setApiAction(true)\r\n\r\n    axios.request( {\r\n      method: \"post\", \r\n      headers: authHeader(),\r\n      url: API_URL+\"post/new\", \r\n      data: article\r\n    }).then (response => {\r\n      // updateGallery([])\r\n      //   updateGallery(prevGallery=>[\r\n      //     ...prevGallery,...response.data.data.data.data\r\n      //   ])\r\n      setEditMode(\"update\")\r\n      alert.show(\"New article created\",{type: 'success'})\r\n      history.replace({\r\n        pathname: '/posts/edit/'+response.data.data.data.id,\r\n        //search: '?query=abc',\r\n        id:response.data.data.data.id,\r\n        state: { id: response.data.data.data.id,navType:\"post_save\",data:response.data.data.data }\r\n    });\r\n      console.log(\"post response\",response.data.data.data.id)\r\n      setApiAction(false)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n          case 422:\r\n              KeysToErrorArray(error.response.data.errors)\r\n            break;\r\n            case 409:\r\n              KeysToErrorArray(error.response.data.errors)\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n              setAuthModal(true)\r\n              setLoginAction(prevArticle=>{\r\n                return {...prevArticle,func:validateArticle}\r\n              })\r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{alert.show(\"Invalid response\",{type: 'error'})}\r\n  \r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n\r\n  \r\n  const updateArticleApi =()=>{\r\n    \r\n    setLoginAction(initialLoginAction)  \r\n    setAuthModal(false)\r\n    setApiAction(true)\r\n\r\n     axios.request( {\r\n      method: \"post\", \r\n      headers: authHeader(),\r\n      url: API_URL+\"post/update\", \r\n      data: article\r\n    }).then (response => {\r\n    \r\n      setEditMode(\"update\")\r\n      alert.show(\"Article Updated\",{type: 'success'})\r\n      console.log(\"post response\",response.data.data.data.id)\r\n      setApiAction(false)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n          case 422:\r\n              KeysToErrorArray(error.response.data.errors)\r\n            break;\r\n            case 409:\r\n              KeysToErrorArray(error.response.data.errors)\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n              setAuthModal(true)\r\n              setLoginAction(prevArticle=>{\r\n                return {...prevArticle,func:validateArticle}\r\n              })\r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{alert.show(\"Invalid response\",{type: 'error'})}\r\n\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const fetchArticleByIdApi =(id)=>{\r\n    setLoginAction(initialLoginAction)\r\n    setAuthModal(false)\r\n    setApiAction(true)\r\n\r\n    authHeader()!==\"\" && axios.get( API_URL+\"post/\"+id,{headers: authHeader()}).then (response => {\r\n      setArticle(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n      \r\n     \r\n      console.log(\"post response\",response.data.data.data)\r\n      console.log(\"all articles\",articles)\r\n      setApiAction(false)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n              setAuthModal(true)\r\n              setLoginAction(prevArticle=>{\r\n                return {...prevArticle,func:fetchArticleByIdApi,params:id}\r\n              })\r\n              \r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{alert.show(\"Invalid response\",{type: 'error'})}\r\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      // setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const deleteArticleApi =(id)=>{\r\n    setLoginAction(initialLoginAction)\r\n    setAuthModal(false)\r\n    setApiAction(true)\r\n    //setUsers([])\r\n\r\n    axios.get( API_URL+\"post/delete/\"+id,{headers: authHeader()}).then (response => {\r\n      // setUsers(prevArticle=>{\r\n      //   return {...prevArticle,...response.data.data.data}\r\n      // })\r\n\r\n\r\n      // setPagination(prevArticle=>{\r\n      //   return {...prevArticle,...response.data.data.data}\r\n      // })\r\n       alert.show(\"Article Deleted\",{type: 'success'})\r\n      const newList = articles.filter((item) => item.id !== id);\r\n       setArticles(newList);\r\n     \r\n      //\r\n      console.log(\"post response\",response.data.data.data)\r\n      setApiAction(false)\r\n  \r\n    }).catch(error => {\r\n      setErrors([])\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n             error.response.data.code ==\"402\" && alert.show(error.response.data.status)\r\n               if(!error.response.data.code){\r\n                    setAuthModal(true)\r\n                    setLoginAction(prevArticle=>{\r\n                    return {...prevArticle,func:deleteArticleApi,params:id}\r\n                   })\r\n               }\r\n              \r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{\r\n        //alert.show(\"Invalid response\",{type: 'error'})\r\n      }\r\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      // setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  const fetchArticlesApi =()=>{\r\n    setArticles([])\r\n    setFetching(true)\r\n    setFetchingFailMsg(null)\r\n    setAuthModal(false)\r\n    setLoginAction(initialLoginAction)\r\n    setApiAction(true)\r\n\r\n    //alert(\"Hi there man\")\r\n\r\n    axios.get( API_URL+\"posts\",{headers: authHeader()}).then (response => {\r\n\r\n    \r\n      setArticles(prevArticle=>{\r\n        return [...prevArticle,...response.data.data.data.data]\r\n      })\r\n\r\n      setPagination(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n\r\n      !response.data.data.data.data.length && setFetchingFailMsg(\"No articles found\")\r\n      \r\n      setFetching(false)\r\n      console.log(\"post response all articles\",response.data.data.data)\r\n      setApiAction(false)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setFetching(false)\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n              setAuthModal(true)\r\n              setFetchingFailMsg(\"Waiting for authorization...\") \r\n              setLoginAction(prevArticle=>{\r\n                return {...prevArticle,func:fetchArticlesApi}\r\n              })\r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{alert.show(\"Invalid response\",{type: 'error'})  }\r\n      // error.response!==undefined ? setFetchingFailMsg(\"No articles found\") : setFetchingFailMsg(\"Unknown error\")\r\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      // setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const goToPageApi =(page)=>{\r\n    setArticles([])\r\n    setCurrentPage(page)\r\n    setAuthModal(false)\r\n    setLoginAction(initialLoginAction)\r\n    setApiAction(true)\r\n    setFetchingFailMsg(null) \r\n\r\n    axios.get( pagination.path+\"?page=\"+page,{headers: authHeader()}).then (response => {\r\n      setArticles(prevArticle=>{\r\n        return [...prevArticle,...response.data.data.data.data]\r\n      })\r\n\r\n      setPagination(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n      \r\n     \r\n      console.log(\"post response all articles\",response.data.data.data)\r\n      setApiAction(false)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n              setFetchingFailMsg(\"No articles found\") \r\n              setAuthModal(true)\r\n              setLoginAction(prevArticle=>{\r\n                return {...prevArticle,func:goToPageApi}\r\n              })\r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{\r\n        alert.show(\"Invalid response\",{type: 'error'})\r\n        \r\n      }\r\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      // setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const searchByPhraseApi =()=>{\r\n    \r\n    setArticles([])\r\n    setFetching(true)\r\n    setFetchingFailMsg(null)\r\n    setAuthModal(false)\r\n    setLoginAction(initialLoginAction)\r\n    setApiAction(true)\r\n\r\n    axios.get( API_URL+\"post/search/\"+searchPhrase,{headers: authHeader()}).then (response => {\r\n\r\n      \r\n      setArticles(prevArticle=>{\r\n        return [...prevArticle,...response.data.data.data.data]\r\n      })\r\n\r\n      setPagination(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n      \r\n      setFetching(false)\r\n      !response.data.data.data.length && setFetchingFailMsg(\"No results found...\")\r\n      // alert(JSON.stringify(response.data) )\r\n      console.log(\"get response\",response.data.data.data)\r\n      setApiAction(false)\r\n      //console.log(\"all articles\",articles)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setFetching(false)\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n              setAuthModal(true)\r\n              setLoginAction(prevArticle=>{\r\n                return {...prevArticle,func:searchByPhraseApi}\r\n              })\r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{alert.show(\"Invalid response\",{type: 'error'})}\r\n      //alert(JSON.stringify(error.response))\r\n      // error.response!==undefined ? setFetchingFailMsg(\"No articles found\") : setFetchingFailMsg(\"Unknown error\")\r\n     \r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const articleContext = {\r\n    article,\r\n    articles,\r\n    updateArticle,\r\n    toast,\r\n    setToast,\r\n    modal,\r\n    setModal,\r\n    errors,\r\n    validateArticle,\r\n    selectedImageFr,\r\n    selectedImageEn,\r\n    setSelectedImageEn,\r\n    setSelectedImageFr,\r\n    setFeaturedFor,\r\n    selectedImageGlobal,\r\n    setSelectedImageGlobal,\r\n    featuredFor,\r\n    editMode,\r\n    setCurrentArticle,\r\n    setArticle,\r\n    setEditMode,\r\n    resetArticle,\r\n    resetEditArticle,\r\n    initialEditArticle,\r\n    toastType,\r\n    setToastType,\r\n    fetchArticleByIdApi,\r\n    fetchArticlesApi,\r\n    pagination,\r\n    goToPageApi,\r\n    currentPage,\r\n    searchPhrase,\r\n    setSearchPhrase,\r\n    searchByPhraseApi,\r\n    setCurrentPage,\r\n    fetching,\r\n    fetchingFailMsg,\r\n    authModal,\r\n    setAuthModal,\r\n    loginAction,\r\n    apiAction,\r\n    setApiAction,\r\n    deleteArticleApi,\r\n    initialLoginAction,\r\n    setLoginAction\r\n\r\n    \r\n\r\n  };\r\n\r\n  // pass the value in provider and return\r\n  return <Context.Provider value={articleContext}  {...props}>{children }</Context.Provider>;\r\n};\r\n\r\n\r\nconst ArticleProvider= {\r\n    Provider,\r\n    Context\r\n};\r\n\r\nProvider.propTypes = {\r\n    article:PropTypes.object,  \r\n};\r\n\r\nProvider.defaultProps = {\r\n  article: {\r\n    title_en: \"\",\r\n    body_en: null,\r\n    featured_en:null,\r\n    title_fr: \"\",\r\n    body_fr: null,\r\n    featured_fr:null,\r\n    status:\"draft\"\r\n  },\r\n\r\n\r\n};\r\n\r\n\r\nexport default ArticleProvider"]},"metadata":{},"sourceType":"module"}