{"ast":null,"code":"import _defineProperty from\"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{createContext,useState,useEffect,useContext}from\"react\";import{useHistory,useLocation,useParams}from\"react-router-dom\";import axios from\"axios\";import{useAlert}from'react-alert';import ToastMe from\"../alerts/toaster\";import authHeader from\"../services/auth-header\";import AuthProvider from'../context/AuthContext';import AuthService from\"../services/auth.service\";import urlService from\"../services/url-service\";var API_URL=urlService().baseUrl;var Context=createContext({});var initialLoginAction={func:null,params:null};var Provider=function Provider(props){// Initial values are obtained from the props\nvar history=useHistory();var alert=useAlert();var _useContext=useContext(AuthProvider.Context),modal=_useContext.modal,setModal=_useContext.setModal;//   alert.show(modal)\n// const initialUser={\n//    name:\"\",\n//    email:\"\",\n//    role:\"editor\"\n// }\nvar childrens=props.childrens;// Use State to keep the values\nvar _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),authModal=_useState4[0],setAuthModal=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),users=_useState6[0],setUsers=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),pagination=_useState8[0],setPagination=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),currentPage=_useState10[0],setCurrentPage=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),searchPhrase=_useState12[0],setSearchPhrase=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),errors=_useState14[0],setErrors=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),fetching=_useState16[0],setFetching=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),fetchingFailMsg=_useState18[0],setFetchingFailMsg=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),toast=_useState20[0],setToast=_useState20[1];var _useState21=useState(\"error\"),_useState22=_slicedToArray(_useState21,2),toastType=_useState22[0],setToastType=_useState22[1];var _useState23=useState(initialLoginAction),_useState24=_slicedToArray(_useState23,2),loginAction=_useState24[0],setLoginAction=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),apiAction=_useState26[0],setApiAction=_useState26[1];// const [featuredFor,setFeaturedFor]=useState(\"\")\nuseEffect(function(){//alert.show(modal)\n},[]);var showLoginModal=function showLoginModal(){return\"hi\";};var KeysToErrorArray=function KeysToErrorArray(errors){Object.keys(errors).map(function(key,index){return setErrors(function(prevError){return[].concat(_toConsumableArray(prevError),[errors[key]]);});});};var updateUser=function updateUser(dataKey,data){//console.log(\"data key\", dataKey) \nreturn setUser(function(prevState){var newState=_objectSpread(_objectSpread({},prevState),{},_defineProperty({},dataKey,data));return newState;});};var addUserApi=function addUserApi(userdata){setErrors([]);setLoginAction(initialLoginAction);setAuthModal(false);setApiAction(true);setFetchingFailMsg(null);// setErrors(prevErrors=>[...prevErrors,\"ready to add user\"])\naxios.request({method:\"post\",headers:authHeader(),url:API_URL+\"user/new\",data:userdata}).then(function(response){alert.show('New user created!',{type:'success'});fetchUsersApi();setApiAction(false);//   console.log(\"post response\",response.data.data.data.id)\n}).catch(function(error){setErrors([]);setApiAction(false);if(error.response){if(error.response.status){switch(error.response.status){case 500:alert.show(error.response.statusText,{type:'error'});break;case 422:KeysToErrorArray(error.response.data.errors);break;case 409:KeysToErrorArray(error.response.data.errors);break;case 401://alert.show(\"Token error\",{type:'notice'})\nerror.response.data.code==\"402\"&&alert.show(error.response.data.status);if(!error.response.data.code){setAuthModal(true);setLoginAction(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),{},{func:addUserApi,params:userdata});});}break;default:!error.response?alert.show(\"Server currently down\",{type:'error'}):alert.show(error.response.statusText,{type:'error'});}}else{alert.show(\"Server currently down\",{type:'error'});}}else{alert.show(\"Invalid response\",{type:'error'});}});};var deleteUserApi=function deleteUserApi(id){setLoginAction(initialLoginAction);setAuthModal(false);setApiAction(true);setFetchingFailMsg(null);//setUsers([])\naxios.get(API_URL+\"user/delete/\"+id,{headers:authHeader()}).then(function(response){// setUsers(prevArticle=>{\n//   return {...prevArticle,...response.data.data.data}\n// })\n// setPagination(prevArticle=>{\n//   return {...prevArticle,...response.data.data.data}\n// })\nfetchUsersApi();alert.show(\"User Deleted\",{type:'success'});//\nconsole.log(\"post response\",response.data.data.data);setApiAction(false);}).catch(function(error){setErrors([]);setApiAction(false);if(error.response){if(error.response.status){switch(error.response.status){case 500:alert.show(error.response.statusText,{type:'error'});break;case 401://alert.show(\"Token error\",{type:'notice'})\nerror.response.data.code==\"402\"&&alert.show(error.response.data.status);if(!error.response.data.code){setAuthModal(true);setLoginAction(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),{},{func:deleteUserApi,params:id});});}break;default:!error.response?alert.show(\"Server currently down\",{type:'error'}):alert.show(error.response.statusText,{type:'error'});}}else{alert.show(\"Server currently down\",{type:'error'});}}else{alert.show(\"Invalid response\",{type:'error'});}// let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n// setErrors(prevError=>[...prevError,apiStatus])\n});};var updatePasswordUserApi=function updatePasswordUserApi(values){setLoginAction(initialLoginAction);setAuthModal(false);setApiAction(true);axios.request({method:\"post\",headers:authHeader(),url:API_URL+\"user/update\",data:values}).then(function(response){alert.show(\"Password Updated\",{type:'success'});// console.log(\"update user response\",response.data.data)\nAuthService.logout();// history.replace('/')\nsetApiAction(false);setAuthModal(true);}).catch(function(error){setErrors([]);setApiAction(false);if(error.response){if(error.response.status){switch(error.response.status){case 500:alert.show(error.response.statusText,{type:'error'});break;case 422:KeysToErrorArray(error.response.data.errors);break;case 409:KeysToErrorArray(error.response.data.errors);break;case 401://alert.show(\"Token error\",{type:'notice'})\nsetAuthModal(true);setLoginAction(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),{},{func:updatePasswordUserApi,params:values});});break;default:!error.response?alert.show(\"Server currently down\",{type:'error'}):alert.show(error.response.statusText,{type:'error'});}}else{alert.show(\"Server currently down\",{type:'error'});}}else{alert.show(\"Invalid response\",{type:'error'});}});};var fetchUsersApi=function fetchUsersApi(){setUsers([]);setFetching(true);setAuthModal(false);setApiAction(true);setFetchingFailMsg(null);//alert(\"Hi there man\")\naxios.get(API_URL+\"users\",{headers:authHeader()}).then(function(response){console.log(\"fetch articles\",response.data.data.data.data);setUsers(function(prevArticle){return[].concat(_toConsumableArray(prevArticle),_toConsumableArray(response.data.data.data.data));});setPagination(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),response.data.data.data);});setFetching(false);console.log(\"post response all articles\",response.data.data.data);setApiAction(false);}).catch(function(error){setErrors([]);setFetching(false);setApiAction(false);if(error.response){if(error.response.status){switch(error.response.status){case 500:alert.show(error.response.statusText,{type:'error'});break;case 422:KeysToErrorArray(error.response.data.errors);break;case 409:KeysToErrorArray(error.response.data.errors);break;case 401:setAuthModal(true);setFetchingFailMsg(\"Waiting for authorization...\");setLoginAction(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),{},{func:fetchUsersApi});});break;default:!error.response?alert.show(\"Server currently down\",{type:'error'}):alert.show(error.response.statusText,{type:'error'});}}else{alert.show(\"Server currently down\",{type:'error'});}}else{alert.show(\"Invalid response\",{type:'error'});}//   error.response!==undefined ? setFetchingFailMsg(\"No programmes found\") : setFetchingFailMsg(\"Unknown error\")\n// let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n// setErrors(prevError=>[...prevError,apiStatus])\n});};var goToPageApi=function goToPageApi(page){setUsers([]);setCurrentPage(page);setApiAction(true);axios.get(pagination.path+\"?page=\"+page,{headers:authHeader()}).then(function(response){setUsers(function(prevArticle){return[].concat(_toConsumableArray(prevArticle),_toConsumableArray(response.data.data.data.data));});setPagination(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),response.data.data.data);});console.log(\"post response all articles\",response.data.data.data);setApiAction(false);}).catch(function(error){setErrors([]);setApiAction(false);switch(error.response){case error.response==500:alert.show(error.response.data.statusText,{type:'error'});break;case error.response==422:KeysToErrorArray(error.response.data.errors);break;case error.response==409:KeysToErrorArray(error.response.data.errors);break;default:!error.response?alert.show(\"Server currently down\",{type:'error'}):alert.show(error.response.statusText,{type:'error'});}//   let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n//   setErrors(prevError=>[...prevError,apiStatus])\n});};var searchByPhraseApi=function searchByPhraseApi(){setUsers([]);setFetching(true);setFetchingFailMsg(null);setApiAction(true);axios.get(API_URL+\"programmes/search/\"+searchPhrase).then(function(response){setUsers(function(prevArticle){return[].concat(_toConsumableArray(prevArticle),_toConsumableArray(response.data.data.data.data));});setPagination(function(prevArticle){return _objectSpread(_objectSpread({},prevArticle),response.data.data.data);});setFetching(false);!response.data.data.data.length&&setFetchingFailMsg(\"No results found...\");console.log(\"get response\",response.data.data.data);setApiAction(false);//console.log(\"all articles\",articles)\n}).catch(function(error){setErrors([]);setFetching(false);setApiAction(false);error.response!==undefined?setFetchingFailMsg(\"No articles found\"):setFetchingFailMsg(\"Unknown error\");// let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n// setErrors(prevError=>[...prevError,apiStatus])\n});};var articleContext={user:user,errors:errors,users:users,setUser:setUser,fetchUsersApi:fetchUsersApi,pagination:pagination,goToPageApi:goToPageApi,currentPage:currentPage,searchPhrase:searchPhrase,setSearchPhrase:setSearchPhrase,searchByPhraseApi:searchByPhraseApi,fetching:fetching,fetchingFailMsg:fetchingFailMsg,updateUser:updateUser,addUserApi:addUserApi,toast:toast,setToast:setToast,toastType:toastType,authModal:authModal,setAuthModal:setAuthModal,loginAction:loginAction,setLoginAction:setLoginAction,deleteUserApi:deleteUserApi,apiAction:apiAction,setApiAction:setApiAction,updatePasswordUserApi:updatePasswordUserApi};// pass the value in provider and return\nreturn/*#__PURE__*/React.createElement(Context.Provider,Object.assign({value:articleContext},props));};var UserProvider={Provider:Provider,Context:Context};export default UserProvider;","map":{"version":3,"sources":["C:/react/lac/src/context/UserContext.js"],"names":["React","createContext","useState","useEffect","useContext","useHistory","useLocation","useParams","axios","useAlert","ToastMe","authHeader","AuthProvider","AuthService","urlService","API_URL","baseUrl","Context","initialLoginAction","func","params","Provider","props","history","alert","modal","setModal","childrens","user","setUser","authModal","setAuthModal","users","setUsers","pagination","setPagination","currentPage","setCurrentPage","searchPhrase","setSearchPhrase","errors","setErrors","fetching","setFetching","fetchingFailMsg","setFetchingFailMsg","toast","setToast","toastType","setToastType","loginAction","setLoginAction","apiAction","setApiAction","showLoginModal","KeysToErrorArray","Object","keys","map","key","index","prevError","updateUser","dataKey","data","prevState","newState","addUserApi","userdata","request","method","headers","url","then","response","show","type","fetchUsersApi","catch","error","status","statusText","code","prevArticle","deleteUserApi","id","get","console","log","updatePasswordUserApi","values","logout","goToPageApi","page","path","searchByPhraseApi","length","undefined","articleContext","UserProvider"],"mappings":"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","sourcesContent":["import React, { createContext, useState,useEffect,useContext} from \"react\";\r\nimport { useHistory,useLocation,useParams } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport axios from \"axios\"\r\nimport { useAlert } from 'react-alert'\r\nimport ToastMe from \"../alerts/toaster\"\r\nimport authHeader from \"../services/auth-header\";\r\nimport AuthProvider from '../context/AuthContext'\r\nimport AuthService from \"../services/auth.service\";\r\nimport urlService from \"../services/url-service\";\r\n\r\nconst API_URL = urlService().baseUrl;\r\n\r\nconst Context = createContext({});\r\n\r\nconst initialLoginAction={func:null,params:null}\r\n\r\n\r\n\r\n const Provider = props => {\r\n  // Initial values are obtained from the props\r\n\r\n  const history=useHistory()\r\n\r\n  const alert = useAlert()\r\n\r\n  const {modal,setModal}=useContext(AuthProvider.Context)\r\n\r\n//   alert.show(modal)\r\n\r\n// const initialUser={\r\n//    name:\"\",\r\n//    email:\"\",\r\n//    role:\"editor\"\r\n// }\r\n \r\n  const {\r\n    // article:initialArticle,\r\n    childrens\r\n  } = props;\r\n\r\n  // Use State to keep the values\r\n  const [user,setUser] = useState({});\r\n  const [authModal,setAuthModal] = useState(false)\r\n  const [users,setUsers] = useState([]);\r\n  const [pagination,setPagination] = useState({});\r\n  const [currentPage,setCurrentPage]=useState(1)\r\n  const [searchPhrase,setSearchPhrase]=useState(\"\")\r\n  const [errors,setErrors]=useState([])\r\n  const [fetching,setFetching]=useState(false)\r\n  const [fetchingFailMsg,setFetchingFailMsg]=useState(null)\r\n  const [toast,setToast]=useState(false)\r\n  const [toastType,setToastType]=useState(\"error\")\r\n  const [loginAction,setLoginAction] =useState(initialLoginAction)\r\n  const [apiAction,setApiAction] =useState(false)\r\n\r\n\r\n  // const [featuredFor,setFeaturedFor]=useState(\"\")\r\n  useEffect(()=>{\r\n    //alert.show(modal)\r\n  },[])\r\n\r\n  \r\n  const showLoginModal=()=>\"hi\"\r\n  \r\n  const KeysToErrorArray=(errors)=>{\r\n    Object.keys(errors).map((key, index)=> setErrors(prevError=>[...prevError,errors[key]]))\r\n   }\r\n\r\n\r\n  const updateUser=(dataKey,data)=> \r\n  {\r\n     //console.log(\"data key\", dataKey) \r\n    return setUser(prevState => { \r\n         let newState=({...prevState,[dataKey]: data})\r\n          return newState\r\n        })  \r\n  }\r\n\r\n  const addUserApi =(userdata)=>{\r\n    setErrors([])\r\n    setLoginAction(initialLoginAction)\r\n    setAuthModal(false)\r\n    setApiAction(true)\r\n    setFetchingFailMsg(null) \r\n    // setErrors(prevErrors=>[...prevErrors,\"ready to add user\"])\r\n  \r\n    axios.request( {\r\n      method: \"post\", \r\n      headers: authHeader(),\r\n      url: API_URL+\"user/new\", \r\n      data: userdata\r\n    }).then (response => {\r\n  alert.show('New user created!',{type: 'success'})\r\n    fetchUsersApi()\r\n    setApiAction(false)\r\n    //   console.log(\"post response\",response.data.data.data.id)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n          case 422:\r\n              KeysToErrorArray(error.response.data.errors)\r\n            break;\r\n            case 409:\r\n              KeysToErrorArray(error.response.data.errors)\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n              error.response.data.code ==\"402\" && alert.show(error.response.data.status)\r\n               if(!error.response.data.code){\r\n                    setAuthModal(true)\r\n                    setLoginAction(prevArticle=>{\r\n                    return {...prevArticle,func:addUserApi,params:userdata}\r\n                   })\r\n               }\r\n             \r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{alert.show(\"Invalid response\",{type: 'error'})}\r\n     \r\n      \r\n  });\r\n\r\n  }\r\n\r\n  \r\n  const deleteUserApi =(id)=>{\r\n    setLoginAction(initialLoginAction)\r\n    setAuthModal(false)\r\n    setApiAction(true)\r\n    setFetchingFailMsg(null) \r\n    //setUsers([])\r\n\r\n    axios.get( API_URL+\"user/delete/\"+id,{headers: authHeader()}).then (response => {\r\n      // setUsers(prevArticle=>{\r\n      //   return {...prevArticle,...response.data.data.data}\r\n      // })\r\n\r\n\r\n      // setPagination(prevArticle=>{\r\n      //   return {...prevArticle,...response.data.data.data}\r\n      // })\r\n      \r\n      fetchUsersApi()\r\n      alert.show(\"User Deleted\",{type: 'success'})\r\n      //\r\n      console.log(\"post response\",response.data.data.data)\r\n      setApiAction(false)\r\n  \r\n    }).catch(error => {\r\n      setErrors([])\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n             error.response.data.code ==\"402\" && alert.show(error.response.data.status)\r\n               if(!error.response.data.code){\r\n                    setAuthModal(true)\r\n                    setLoginAction(prevArticle=>{\r\n                    return {...prevArticle,func:deleteUserApi,params:id}\r\n                   })\r\n               }\r\n              \r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{alert.show(\"Invalid response\",{type: 'error'})}\r\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      // setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\nconst updatePasswordUserApi=(values)=>{\r\n\r\n  setLoginAction(initialLoginAction)  \r\n  setAuthModal(false)\r\n  setApiAction(true)\r\n\r\n   axios.request( {\r\n    method: \"post\", \r\n    headers: authHeader(),\r\n    url: API_URL+\"user/update\", \r\n    data: values\r\n  }).then (response => {\r\n\r\n    alert.show(\"Password Updated\",{type: 'success'})\r\n    // console.log(\"update user response\",response.data.data)\r\n    AuthService.logout();\r\n    // history.replace('/')\r\n    setApiAction(false)\r\n    setAuthModal(true)\r\n\r\n  }).catch(error => {\r\n    setErrors([])\r\n    setApiAction(false)\r\n    if(error.response){\r\n      if(error.response.status){\r\n           switch(error.response.status) {\r\n        case 500:\r\n            alert.show(error.response.statusText,{type: 'error'})\r\n          break;\r\n        case 422:\r\n            KeysToErrorArray(error.response.data.errors)\r\n          break;\r\n          case 409:\r\n            KeysToErrorArray(error.response.data.errors)\r\n          break;\r\n          case 401:\r\n            //alert.show(\"Token error\",{type:'notice'})\r\n            setAuthModal(true)\r\n            setLoginAction(prevArticle=>{\r\n              return {...prevArticle,func:updatePasswordUserApi,params:values}\r\n            })\r\n          break;\r\n        default:\r\n            !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n            alert.show(error.response.statusText,{type: 'error'})\r\n      }     \r\n      }else{\r\n        alert.show(\"Server currently down\",{type: 'error'})\r\n      }\r\n    }else{alert.show(\"Invalid response\",{type: 'error'})}\r\n\r\n    \r\n});\r\n\r\n\r\n}\r\n\r\n  const fetchUsersApi =()=>{\r\n    setUsers([])\r\n    setFetching(true)\r\n    setAuthModal(false)\r\n    setApiAction(true)\r\n    setFetchingFailMsg(null) \r\n    //alert(\"Hi there man\")\r\n    axios.get( API_URL+\"users\",{headers: authHeader()}).then (response => {\r\n\r\n      console.log(\"fetch articles\",response.data.data.data.data)\r\n      setUsers(prevArticle=>{\r\n        return [...prevArticle,...response.data.data.data.data]\r\n      })\r\n\r\n      setPagination(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n      \r\n      setFetching(false)\r\n      console.log(\"post response all articles\",response.data.data.data)\r\n      setApiAction(false)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setFetching(false)\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n          case 422:\r\n              KeysToErrorArray(error.response.data.errors)\r\n            break;\r\n            case 409:\r\n              KeysToErrorArray(error.response.data.errors)\r\n            break;\r\n            case 401:\r\n            \r\n                    setAuthModal(true)\r\n                    setFetchingFailMsg(\"Waiting for authorization...\") \r\n                    setLoginAction(prevArticle=>{\r\n                    return {...prevArticle,func:fetchUsersApi}\r\n                   })\r\n            \r\n             \r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{alert.show(\"Invalid response\",{type: 'error'})}\r\n \r\n    //   error.response!==undefined ? setFetchingFailMsg(\"No programmes found\") : setFetchingFailMsg(\"Unknown error\")\r\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      // setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const goToPageApi =(page)=>{\r\n    setUsers([])\r\n    setCurrentPage(page)\r\n    setApiAction(true)\r\n\r\n    axios.get( pagination.path+\"?page=\"+page,{headers: authHeader()}).then (response => {\r\n        setUsers(prevArticle=>{\r\n        return [...prevArticle,...response.data.data.data.data]\r\n      })\r\n\r\n      setPagination(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n      \r\n     \r\n      console.log(\"post response all articles\",response.data.data.data)\r\n      setApiAction(false)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setApiAction(false)\r\n        switch(error.response) {\r\n        case error.response==500:\r\n            alert.show(error.response.data.statusText,{type: 'error'})\r\n          break;\r\n        case error.response==422:\r\n            KeysToErrorArray(error.response.data.errors)\r\n          break;\r\n          case error.response==409:\r\n            KeysToErrorArray(error.response.data.errors)\r\n          break;\r\n        default:\r\n            !error.response ? alert.show(\"Server currently down\",{type: 'error'}):alert.show(error.response.statusText,{type: 'error'})\r\n      }\r\n    //   let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n    //   setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const searchByPhraseApi =()=>{\r\n    \r\n    setUsers([])\r\n    setFetching(true)\r\n    setFetchingFailMsg(null)\r\n    setApiAction(true)\r\n\r\n    axios.get( API_URL+\"programmes/search/\"+searchPhrase).then (response => {\r\n\r\n      \r\n        setUsers(prevArticle=>{\r\n        return [...prevArticle,...response.data.data.data.data]\r\n      })\r\n\r\n      setPagination(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n      \r\n      setFetching(false)\r\n      !response.data.data.data.length && setFetchingFailMsg(\"No results found...\")\r\n      console.log(\"get response\",response.data.data.data)\r\n      setApiAction(false)\r\n      //console.log(\"all articles\",articles)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setFetching(false)\r\n      setApiAction(false)\r\n     \r\n      error.response!==undefined ? setFetchingFailMsg(\"No articles found\") : setFetchingFailMsg(\"Unknown error\")\r\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      // setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const articleContext = {\r\n    user,\r\n    errors,\r\n    users,\r\n    setUser,\r\n    fetchUsersApi,\r\n    pagination,\r\n    goToPageApi,\r\n    currentPage,\r\n    searchPhrase,\r\n    setSearchPhrase,\r\n    searchByPhraseApi,\r\n    fetching,\r\n    fetchingFailMsg,\r\n    updateUser,\r\n    addUserApi,\r\n    toast,\r\n    setToast,\r\n    toastType,\r\n    authModal,\r\n    setAuthModal,\r\n    loginAction,\r\n    setLoginAction,\r\n    deleteUserApi,\r\n    apiAction,\r\n    setApiAction,\r\n    updatePasswordUserApi\r\n    \r\n  };\r\n\r\n  // pass the value in provider and return\r\n  return <Context.Provider value={articleContext}  {...props}></Context.Provider>;\r\n};\r\n\r\n\r\nconst UserProvider= {\r\n    Provider,\r\n    Context\r\n};\r\n\r\n\r\nexport default UserProvider"]},"metadata":{},"sourceType":"module"}