{"ast":null,"code":"import _defineProperty from \"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\react\\\\lac\\\\src\\\\context\\\\ArticleContext.js\";\n\nimport React, { createContext, useState, useEffect } from \"react\";\nimport { useHistory, useLocation, useParams } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\nimport { useAlert } from 'react-alert';\nimport authHeader from \"../services/auth-header\";\nimport urlService from \"../services/url-service\";\nvar API_URL = urlService().baseUrl;\nvar Context = createContext({});\nvar initialArticle = {\n  id: null,\n  title_en: \"\",\n  body_en: null,\n  featured_en: null,\n  title_fr: \"\",\n  body_fr: null,\n  featured_fr: null,\n  status: \"draft\",\n  category: \"\",\n  created_at: null,\n  updated_at: null\n};\nvar initialEditArticle = {\n  id: null,\n  title_en: \"\",\n  body_en: null,\n  featured_en: null,\n  title_fr: \"\",\n  body_fr: null,\n  featured_fr: null,\n  status: \"draft\",\n  category: \"\",\n  created_at: null,\n  updated_at: null\n};\nvar initialLoginAction = {\n  func: null,\n  params: null\n};\n\nvar Provider = function Provider(props) {\n  // Initial values are obtained from the props\n  var history = useHistory();\n\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var location = useLocation();\n  var alert = useAlert();\n  var errorCount;\n  var children = props.children; // Use State to keep the values\n\n  var _useState = useState(initialArticle),\n      _useState2 = _slicedToArray(_useState, 2),\n      article = _useState2[0],\n      setArticle = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      articles = _useState4[0],\n      setArticles = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pagination = _useState6[0],\n      setPagination = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      toast = _useState8[0],\n      setToast = _useState8[1];\n\n  var _useState9 = useState(\"error\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      toastType = _useState10[0],\n      setToastType = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      modal = _useState12[0],\n      setModal = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      authModal = _useState14[0],\n      setAuthModal = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      errors = _useState16[0],\n      setErrors = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      selectedImageEn = _useState18[0],\n      setSelectedImageEn = _useState18[1];\n\n  var _useState19 = useState(\"\"),\n      _useState20 = _slicedToArray(_useState19, 2),\n      selectedImageFr = _useState20[0],\n      setSelectedImageFr = _useState20[1];\n\n  var _useState21 = useState(\"\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      selectedImageGlobal = _useState22[0],\n      setSelectedImageGlobal = _useState22[1];\n\n  var _useState23 = useState(\"\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      featuredFor = _useState24[0],\n      setFeaturedFor = _useState24[1];\n\n  var _useState25 = useState(\"new\"),\n      _useState26 = _slicedToArray(_useState25, 2),\n      editMode = _useState26[0],\n      setEditMode = _useState26[1];\n\n  var _useState27 = useState(\"\"),\n      _useState28 = _slicedToArray(_useState27, 2),\n      currentArticle = _useState28[0],\n      setCurrentArticle = _useState28[1];\n\n  var _useState29 = useState(1),\n      _useState30 = _slicedToArray(_useState29, 2),\n      currentPage = _useState30[0],\n      setCurrentPage = _useState30[1];\n\n  var _useState31 = useState(\"\"),\n      _useState32 = _slicedToArray(_useState31, 2),\n      searchPhrase = _useState32[0],\n      setSearchPhrase = _useState32[1];\n\n  var _useState33 = useState(false),\n      _useState34 = _slicedToArray(_useState33, 2),\n      fetching = _useState34[0],\n      setFetching = _useState34[1];\n\n  var _useState35 = useState(null),\n      _useState36 = _slicedToArray(_useState35, 2),\n      fetchingFailMsg = _useState36[0],\n      setFetchingFailMsg = _useState36[1];\n\n  var _useState37 = useState(initialLoginAction),\n      _useState38 = _slicedToArray(_useState37, 2),\n      loginAction = _useState38[0],\n      setLoginAction = _useState38[1];\n\n  var _useState39 = useState(false),\n      _useState40 = _slicedToArray(_useState39, 2),\n      apiAction = _useState40[0],\n      setApiAction = _useState40[1]; // const [featuredFor,setFeaturedFor]=useState(\"\")\n\n\n  useEffect(function () {\n    //console.log(\"id\",id)\n    updateFeatured();\n    console.log(\"articles rebuilt\", articles[0]);\n    console.log(\"pagination rebuilt\", pagination);\n    console.log(\"article rebuilt\", article);\n  }, [article, articles, pagination]);\n\n  var KeysToErrorArray = function KeysToErrorArray(errors) {\n    Object.keys(errors).map(function (key, index) {\n      return setErrors(function (prevError) {\n        return [].concat(_toConsumableArray(prevError), [errors[key]]);\n      });\n    });\n  };\n\n  var updateArticle = function updateArticle(dataKey, data) {\n    //console.log(\"data key\", dataKey) \n    return setArticle(function (prevState) {\n      var newState = _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, dataKey, data));\n\n      return newState;\n    });\n  };\n\n  var updateFeatured = function updateFeatured() {\n    //console.log(\"data key\", dataKey) \n    article.featured_en !== null && setSelectedImageEn(article.featured_en);\n    article.featured_fr !== null && setSelectedImageFr(article.featured_fr);\n  };\n\n  var resetArticle = function resetArticle() {\n    setArticle(initialArticle);\n    setSelectedImageEn(\"\");\n    setSelectedImageFr(\"\");\n    setCurrentArticle(\"\");\n    setFeaturedFor(\"\");\n    setToast(false);\n  };\n\n  var resetEditArticle = function resetEditArticle() {\n    setArticle(initialEditArticle);\n  };\n\n  var validateArticle = function validateArticle() {\n    setErrors([]);\n    setToast(false);\n    errorCount = 0;\n    var tmpErrors = [];\n\n    if (article.status == \"published\") {\n      if (article.title_en == \"\") {\n        tmpErrors.push(\"Please enter article title (english) before publishing as (published status)\");\n        errorCount++;\n      }\n\n      if (article.body_en == null & article.type == \"dash\") {\n        tmpErrors.push(\"Please enter article body (english) before publishing as (published status)\");\n        errorCount++;\n      }\n\n      if (article.category == \"\") {\n        tmpErrors.push(\"Please select category before publishing as (published status)\");\n        errorCount++;\n      }\n    }\n\n    if (article.status == \"draft\") {\n      if (article.title_en == \"\") {\n        tmpErrors.push(\"Please enter article title (english) before publishing as (draft status)\");\n        errorCount++;\n      }\n    }\n\n    errorCount > 0 && setErrors(function (prevError) {\n      return [].concat(_toConsumableArray(prevError), tmpErrors);\n    });\n    editMode == \"new\" && errorCount == 0 && publishArticleApi();\n    editMode == \"update\" && errorCount == 0 && updateArticleApi();\n  };\n\n  var publishArticleApi = function publishArticleApi() {\n    setLoginAction(initialLoginAction);\n    setAuthModal(false);\n    setApiAction(true);\n    axios.request({\n      method: \"post\",\n      headers: authHeader(),\n      url: API_URL + \"post/new\",\n      data: article\n    }).then(function (response) {\n      // updateGallery([])\n      //   updateGallery(prevGallery=>[\n      //     ...prevGallery,...response.data.data.data.data\n      //   ])\n      setEditMode(\"update\");\n      alert.show(\"New article created\", {\n        type: 'success'\n      });\n      history.replace({\n        pathname: '/posts/edit/' + response.data.data.data.id,\n        //search: '?query=abc',\n        id: response.data.data.data.id,\n        state: {\n          id: response.data.data.data.id,\n          navType: \"post_save\",\n          data: response.data.data.data\n        }\n      });\n      console.log(\"post response\", response.data.data.data.id);\n      setApiAction(false);\n    }).catch(function (error) {\n      setErrors([]);\n      setApiAction(false);\n\n      if (error.response) {\n        if (error.response.status) {\n          switch (error.response.status) {\n            case 500:\n              alert.show(error.response.statusText, {\n                type: 'error'\n              });\n              break;\n\n            case 422:\n              KeysToErrorArray(error.response.data.errors);\n              break;\n\n            case 409:\n              KeysToErrorArray(error.response.data.errors);\n              break;\n\n            case 401:\n              //alert.show(\"Token error\",{type:'notice'})\n              setAuthModal(true);\n              setLoginAction(function (prevArticle) {\n                return _objectSpread(_objectSpread({}, prevArticle), {}, {\n                  func: validateArticle\n                });\n              });\n              break;\n\n            default:\n              !error.response ? alert.show(\"Server currently down\", {\n                type: 'error'\n              }) : alert.show(error.response.statusText, {\n                type: 'error'\n              });\n          }\n        } else {\n          alert.show(\"Server currently down\", {\n            type: 'error'\n          });\n        }\n      } else {\n        alert.show(\"Invalid response\", {\n          type: 'error'\n        });\n      }\n    });\n  };\n\n  var updateArticleApi = function updateArticleApi() {\n    setLoginAction(initialLoginAction);\n    setAuthModal(false);\n    setApiAction(true);\n    axios.request({\n      method: \"post\",\n      headers: authHeader(),\n      url: API_URL + \"post/update\",\n      data: article\n    }).then(function (response) {\n      setEditMode(\"update\");\n      alert.show(\"Article Updated\", {\n        type: 'success'\n      });\n      console.log(\"post response\", response.data.data.data.id);\n      setApiAction(false);\n    }).catch(function (error) {\n      setErrors([]);\n      setApiAction(false);\n\n      if (error.response) {\n        if (error.response.status) {\n          switch (error.response.status) {\n            case 500:\n              alert.show(error.response.statusText, {\n                type: 'error'\n              });\n              break;\n\n            case 422:\n              KeysToErrorArray(error.response.data.errors);\n              break;\n\n            case 409:\n              KeysToErrorArray(error.response.data.errors);\n              break;\n\n            case 401:\n              //alert.show(\"Token error\",{type:'notice'})\n              setAuthModal(true);\n              setLoginAction(function (prevArticle) {\n                return _objectSpread(_objectSpread({}, prevArticle), {}, {\n                  func: validateArticle\n                });\n              });\n              break;\n\n            default:\n              !error.response ? alert.show(\"Server currently down\", {\n                type: 'error'\n              }) : alert.show(error.response.statusText, {\n                type: 'error'\n              });\n          }\n        } else {\n          alert.show(\"Server currently down\", {\n            type: 'error'\n          });\n        }\n      } else {\n        alert.show(\"Invalid response\", {\n          type: 'error'\n        });\n      }\n    });\n  };\n\n  var fetchArticleByIdApi = function fetchArticleByIdApi(id) {\n    setLoginAction(initialLoginAction);\n    setAuthModal(false);\n    setApiAction(true);\n    authHeader() !== \"\" && axios.get(API_URL + \"post/\" + id, {\n      headers: authHeader()\n    }).then(function (response) {\n      setArticle(function (prevArticle) {\n        return _objectSpread(_objectSpread({}, prevArticle), response.data.data.data);\n      });\n      console.log(\"post response\", response.data.data.data);\n      console.log(\"all articles\", articles);\n      setApiAction(false);\n    }).catch(function (error) {\n      setErrors([]);\n      setApiAction(false);\n\n      if (error.response) {\n        if (error.response.status) {\n          switch (error.response.status) {\n            case 500:\n              alert.show(error.response.statusText, {\n                type: 'error'\n              });\n              break;\n\n            case 401:\n              //alert.show(\"Token error\",{type:'notice'})\n              setAuthModal(true);\n              setLoginAction(function (prevArticle) {\n                return _objectSpread(_objectSpread({}, prevArticle), {}, {\n                  func: fetchArticleByIdApi,\n                  params: id\n                });\n              });\n              break;\n\n            default:\n              !error.response ? alert.show(\"Server currently down\", {\n                type: 'error'\n              }) : alert.show(error.response.statusText, {\n                type: 'error'\n              });\n          }\n        } else {\n          alert.show(\"Server currently down\", {\n            type: 'error'\n          });\n        }\n      } else {\n        alert.show(\"Invalid response\", {\n          type: 'error'\n        });\n      } // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n      // setErrors(prevError=>[...prevError,apiStatus])\n\n    });\n  };\n\n  var deleteArticleApi = function deleteArticleApi(id) {\n    setLoginAction(initialLoginAction);\n    setAuthModal(false);\n    setApiAction(true); //setUsers([])\n\n    axios.get(API_URL + \"post/delete/\" + id, {\n      headers: authHeader()\n    }).then(function (response) {\n      // setUsers(prevArticle=>{\n      //   return {...prevArticle,...response.data.data.data}\n      // })\n      // setPagination(prevArticle=>{\n      //   return {...prevArticle,...response.data.data.data}\n      // })\n      alert.show(\"Article Deleted\", {\n        type: 'success'\n      });\n      var newList = articles.filter(function (item) {\n        return item.id !== id;\n      });\n      setArticles(newList); //\n\n      console.log(\"post response\", response.data.data.data);\n      setApiAction(false);\n    }).catch(function (error) {\n      setErrors([]);\n      setApiAction(false);\n\n      if (error.response) {\n        if (error.response.status) {\n          switch (error.response.status) {\n            case 500:\n              alert.show(error.response.statusText, {\n                type: 'error'\n              });\n              break;\n\n            case 401:\n              //alert.show(\"Token error\",{type:'notice'})\n              error.response.data.code == \"402\" && alert.show(error.response.data.status);\n\n              if (!error.response.data.code) {\n                setAuthModal(true);\n                setLoginAction(function (prevArticle) {\n                  return _objectSpread(_objectSpread({}, prevArticle), {}, {\n                    func: deleteArticleApi,\n                    params: id\n                  });\n                });\n              }\n\n              break;\n\n            default:\n              !error.response ? alert.show(\"Server currently down\", {\n                type: 'error'\n              }) : alert.show(error.response.statusText, {\n                type: 'error'\n              });\n          }\n        } else {\n          alert.show(\"Server currently down\", {\n            type: 'error'\n          });\n        }\n      } else {//alert.show(\"Invalid response\",{type: 'error'})\n      } // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n      // setErrors(prevError=>[...prevError,apiStatus])\n\n    });\n  };\n\n  var fetchArticlesApi = function fetchArticlesApi() {\n    setArticles([]);\n    setFetching(true);\n    setFetchingFailMsg(null);\n    setAuthModal(false);\n    setLoginAction(initialLoginAction);\n    setApiAction(true); //alert(\"Hi there man\")\n\n    axios.get(API_URL + \"posts\", {\n      headers: authHeader()\n    }).then(function (response) {\n      setArticles(function (prevArticle) {\n        return [].concat(_toConsumableArray(prevArticle), _toConsumableArray(response.data.data.data.data));\n      });\n      setPagination(function (prevArticle) {\n        return _objectSpread(_objectSpread({}, prevArticle), response.data.data.data);\n      });\n      !response.data.data.data.data.length && setFetchingFailMsg(\"No articles found\");\n      setFetching(false);\n      console.log(\"post response all articles\", response.data.data.data);\n      setApiAction(false);\n    }).catch(function (error) {\n      setErrors([]);\n      setFetching(false);\n      setApiAction(false);\n\n      if (error.response) {\n        if (error.response.status) {\n          switch (error.response.status) {\n            case 500:\n              alert.show(error.response.statusText, {\n                type: 'error'\n              });\n              break;\n\n            case 401:\n              //alert.show(\"Token error\",{type:'notice'})\n              setAuthModal(true);\n              setFetchingFailMsg(\"Waiting for authorization...\");\n              setLoginAction(function (prevArticle) {\n                return _objectSpread(_objectSpread({}, prevArticle), {}, {\n                  func: fetchArticlesApi\n                });\n              });\n              break;\n\n            default:\n              !error.response ? alert.show(\"Server currently down\", {\n                type: 'error'\n              }) : alert.show(error.response.statusText, {\n                type: 'error'\n              });\n          }\n        } else {\n          alert.show(\"Server currently down\", {\n            type: 'error'\n          });\n        }\n      } else {\n        alert.show(\"Invalid response\", {\n          type: 'error'\n        });\n      } // error.response!==undefined ? setFetchingFailMsg(\"No articles found\") : setFetchingFailMsg(\"Unknown error\")\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n      // setErrors(prevError=>[...prevError,apiStatus])\n\n    });\n  };\n\n  var goToPageApi = function goToPageApi(page) {\n    setArticles([]);\n    setCurrentPage(page);\n    setAuthModal(false);\n    setLoginAction(initialLoginAction);\n    setApiAction(true);\n    setFetchingFailMsg(null);\n    axios.get(pagination.path + \"?page=\" + page, {\n      headers: authHeader()\n    }).then(function (response) {\n      setArticles(function (prevArticle) {\n        return [].concat(_toConsumableArray(prevArticle), _toConsumableArray(response.data.data.data.data));\n      });\n      setPagination(function (prevArticle) {\n        return _objectSpread(_objectSpread({}, prevArticle), response.data.data.data);\n      });\n      console.log(\"post response all articles\", response.data.data.data);\n      setApiAction(false);\n    }).catch(function (error) {\n      setErrors([]);\n      setApiAction(false);\n\n      if (error.response) {\n        if (error.response.status) {\n          switch (error.response.status) {\n            case 500:\n              alert.show(error.response.statusText, {\n                type: 'error'\n              });\n              break;\n\n            case 401:\n              //alert.show(\"Token error\",{type:'notice'})\n              setFetchingFailMsg(\"No articles found\");\n              setAuthModal(true);\n              setLoginAction(function (prevArticle) {\n                return _objectSpread(_objectSpread({}, prevArticle), {}, {\n                  func: goToPageApi\n                });\n              });\n              break;\n\n            default:\n              !error.response ? alert.show(\"Server currently down\", {\n                type: 'error'\n              }) : alert.show(error.response.statusText, {\n                type: 'error'\n              });\n          }\n        } else {\n          alert.show(\"Server currently down\", {\n            type: 'error'\n          });\n        }\n      } else {\n        alert.show(\"Invalid response\", {\n          type: 'error'\n        });\n      } // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n      // setErrors(prevError=>[...prevError,apiStatus])\n\n    });\n  };\n\n  var searchByPhraseApi = function searchByPhraseApi() {\n    setArticles([]);\n    setFetching(true);\n    setFetchingFailMsg(null);\n    setAuthModal(false);\n    setLoginAction(initialLoginAction);\n    setApiAction(true);\n    axios.get(API_URL + \"post/search/\" + searchPhrase, {\n      headers: authHeader()\n    }).then(function (response) {\n      setArticles(function (prevArticle) {\n        return [].concat(_toConsumableArray(prevArticle), _toConsumableArray(response.data.data.data.data));\n      });\n      setPagination(function (prevArticle) {\n        return _objectSpread(_objectSpread({}, prevArticle), response.data.data.data);\n      });\n      setFetching(false);\n      !response.data.data.data.length && setFetchingFailMsg(\"No results found...\"); // alert(JSON.stringify(response.data) )\n\n      console.log(\"get response\", response.data.data.data);\n      setApiAction(false); //console.log(\"all articles\",articles)\n    }).catch(function (error) {\n      setErrors([]);\n      setFetching(false);\n      setApiAction(false);\n\n      if (error.response) {\n        if (error.response.status) {\n          switch (error.response.status) {\n            case 500:\n              alert.show(error.response.statusText, {\n                type: 'error'\n              });\n              break;\n\n            case 401:\n              //alert.show(\"Token error\",{type:'notice'})\n              setAuthModal(true);\n              setLoginAction(function (prevArticle) {\n                return _objectSpread(_objectSpread({}, prevArticle), {}, {\n                  func: searchByPhraseApi\n                });\n              });\n              break;\n\n            default:\n              !error.response ? alert.show(\"Server currently down\", {\n                type: 'error'\n              }) : alert.show(error.response.statusText, {\n                type: 'error'\n              });\n          }\n        } else {\n          alert.show(\"Server currently down\", {\n            type: 'error'\n          });\n        }\n      } else {\n        alert.show(\"Invalid response\", {\n          type: 'error'\n        });\n      } //alert(JSON.stringify(error.response))\n      // error.response!==undefined ? setFetchingFailMsg(\"No articles found\") : setFetchingFailMsg(\"Unknown error\")\n\n    });\n  };\n\n  var articleContext = {\n    article: article,\n    articles: articles,\n    updateArticle: updateArticle,\n    toast: toast,\n    setToast: setToast,\n    modal: modal,\n    setModal: setModal,\n    errors: errors,\n    validateArticle: validateArticle,\n    selectedImageFr: selectedImageFr,\n    selectedImageEn: selectedImageEn,\n    setSelectedImageEn: setSelectedImageEn,\n    setSelectedImageFr: setSelectedImageFr,\n    setFeaturedFor: setFeaturedFor,\n    selectedImageGlobal: selectedImageGlobal,\n    setSelectedImageGlobal: setSelectedImageGlobal,\n    featuredFor: featuredFor,\n    editMode: editMode,\n    setCurrentArticle: setCurrentArticle,\n    setArticle: setArticle,\n    setEditMode: setEditMode,\n    resetArticle: resetArticle,\n    resetEditArticle: resetEditArticle,\n    initialEditArticle: initialEditArticle,\n    toastType: toastType,\n    setToastType: setToastType,\n    fetchArticleByIdApi: fetchArticleByIdApi,\n    fetchArticlesApi: fetchArticlesApi,\n    pagination: pagination,\n    goToPageApi: goToPageApi,\n    currentPage: currentPage,\n    searchPhrase: searchPhrase,\n    setSearchPhrase: setSearchPhrase,\n    searchByPhraseApi: searchByPhraseApi,\n    setCurrentPage: setCurrentPage,\n    fetching: fetching,\n    fetchingFailMsg: fetchingFailMsg,\n    authModal: authModal,\n    setAuthModal: setAuthModal,\n    loginAction: loginAction,\n    apiAction: apiAction,\n    setApiAction: setApiAction,\n    deleteArticleApi: deleteArticleApi,\n    initialLoginAction: initialLoginAction,\n    setLoginAction: setLoginAction\n  }; // pass the value in provider and return\n\n  return /*#__PURE__*/React.createElement(Context.Provider, Object.assign({\n    value: articleContext\n  }, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 644,\n      columnNumber: 10\n    }\n  }), children);\n};\n\nvar ArticleProvider = {\n  Provider: Provider,\n  Context: Context\n};\nProvider.propTypes = {\n  article: PropTypes.object\n};\nProvider.defaultProps = {\n  article: {\n    title_en: \"\",\n    body_en: null,\n    featured_en: null,\n    title_fr: \"\",\n    body_fr: null,\n    featured_fr: null,\n    status: \"draft\"\n  }\n};\nexport default ArticleProvider;","map":{"version":3,"sources":["C:/react/lac/src/context/ArticleContext.js"],"names":["React","createContext","useState","useEffect","useHistory","useLocation","useParams","PropTypes","axios","useAlert","authHeader","urlService","API_URL","baseUrl","Context","initialArticle","id","title_en","body_en","featured_en","title_fr","body_fr","featured_fr","status","category","created_at","updated_at","initialEditArticle","initialLoginAction","func","params","Provider","props","history","location","alert","errorCount","children","article","setArticle","articles","setArticles","pagination","setPagination","toast","setToast","toastType","setToastType","modal","setModal","authModal","setAuthModal","errors","setErrors","selectedImageEn","setSelectedImageEn","selectedImageFr","setSelectedImageFr","selectedImageGlobal","setSelectedImageGlobal","featuredFor","setFeaturedFor","editMode","setEditMode","currentArticle","setCurrentArticle","currentPage","setCurrentPage","searchPhrase","setSearchPhrase","fetching","setFetching","fetchingFailMsg","setFetchingFailMsg","loginAction","setLoginAction","apiAction","setApiAction","updateFeatured","console","log","KeysToErrorArray","Object","keys","map","key","index","prevError","updateArticle","dataKey","data","prevState","newState","resetArticle","resetEditArticle","validateArticle","tmpErrors","push","type","publishArticleApi","updateArticleApi","request","method","headers","url","then","response","show","replace","pathname","state","navType","catch","error","statusText","prevArticle","fetchArticleByIdApi","get","deleteArticleApi","newList","filter","item","code","fetchArticlesApi","length","goToPageApi","page","path","searchByPhraseApi","articleContext","ArticleProvider","propTypes","object","defaultProps"],"mappings":"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","sourcesContent":["import React, { createContext, useState,useEffect} from \"react\";\r\nimport { useHistory,useLocation,useParams } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport axios from \"axios\"\r\nimport { useAlert } from 'react-alert'\r\nimport authHeader from \"../services/auth-header\";\r\nimport urlService from \"../services/url-service\";\r\n\r\nconst API_URL = urlService().baseUrl;\r\n\r\nconst Context = createContext({});\r\n\r\nconst initialArticle={\r\n    id:null,\r\n    title_en: \"\",\r\n    body_en: null,\r\n    featured_en:null,\r\n    title_fr: \"\",\r\n    body_fr: null,\r\n    featured_fr:null,\r\n    status:\"draft\",\r\n    category:\"\",\r\n    created_at:null,\r\n    updated_at:null\r\n}\r\n\r\n\r\nconst initialEditArticle={\r\n id:null,\r\n title_en: \"\",\r\n body_en: null,\r\n featured_en:null,\r\n title_fr: \"\",\r\n body_fr: null,\r\n featured_fr:null,\r\n status:\"draft\",\r\n category:\"\",\r\n created_at:null,\r\n updated_at:null\r\n}\r\n\r\n\r\nconst initialLoginAction={func:null,params:null}\r\n\r\n const Provider = props => {\r\n  // Initial values are obtained from the props\r\n const history = useHistory();\r\n\r\nconst {id} = useParams();\r\n\r\nconst location = useLocation();\r\n\r\nconst alert = useAlert()\r\n\r\nlet errorCount\r\n\r\n\r\n \r\n  const {\r\n    // article:initialArticle,\r\n    children\r\n  } = props;\r\n\r\n  // Use State to keep the values\r\n  const [article,setArticle] = useState(initialArticle);\r\n  const [articles,setArticles] = useState([]);\r\n  const [pagination,setPagination] = useState({});\r\n  const [toast,setToast]=useState(false)\r\n  const [toastType,setToastType]=useState(\"error\")\r\n  const [modal,setModal]=useState(false)\r\n  const [authModal,setAuthModal] = useState(false)\r\n  const [errors,setErrors]=useState([])\r\n  const [selectedImageEn,setSelectedImageEn]=useState(\"\")\r\n  const [selectedImageFr,setSelectedImageFr]=useState(\"\")\r\n  const [selectedImageGlobal,setSelectedImageGlobal]=useState(\"\")\r\n  const [featuredFor,setFeaturedFor]=useState(\"\")\r\n  const [editMode,setEditMode]=useState(\"new\")\r\n  const [currentArticle,setCurrentArticle]=useState(\"\")\r\n  const [currentPage,setCurrentPage]=useState(1)\r\n  const [searchPhrase,setSearchPhrase]=useState(\"\")\r\n  const [fetching,setFetching]=useState(false)\r\n  const [fetchingFailMsg,setFetchingFailMsg]=useState(null)\r\n  const [loginAction,setLoginAction] =useState(initialLoginAction)\r\n  const [apiAction,setApiAction] =useState(false)\r\n\r\n\r\n  // const [featuredFor,setFeaturedFor]=useState(\"\")\r\n\r\n  useEffect(()=>{\r\n//console.log(\"id\",id)\r\nupdateFeatured()\r\nconsole.log(\"articles rebuilt\",articles[0])\r\nconsole.log(\"pagination rebuilt\",pagination)\r\nconsole.log(\"article rebuilt\",article)\r\n  },[article,articles,pagination])\r\n\r\n\r\n  const KeysToErrorArray=(errors)=>{\r\n    Object.keys(errors).map((key, index)=> setErrors(prevError=>[...prevError,errors[key]]))\r\n   }\r\n  \r\n\r\n  const updateArticle=(dataKey,data)=> \r\n  {\r\n     //console.log(\"data key\", dataKey) \r\n    return setArticle(prevState => { \r\n         let newState=({...prevState,[dataKey]: data})\r\n          return newState\r\n        })  \r\n  }\r\n\r\n  const updateFeatured=()=> \r\n  {\r\n     //console.log(\"data key\", dataKey) \r\n     article.featured_en!==null && setSelectedImageEn( article.featured_en)\r\n\r\n     article.featured_fr!==null && setSelectedImageFr( article.featured_fr)\r\n    \r\n  }\r\n  \r\n  const resetArticle=()=> \r\n  {\r\n    setArticle(initialArticle)\r\n    setSelectedImageEn(\"\")\r\n    setSelectedImageFr(\"\")\r\n    setCurrentArticle(\"\")\r\n    setFeaturedFor(\"\")\r\n    setToast(false)\r\n  }\r\n\r\n\r\n\r\n  const resetEditArticle=()=> \r\n  {\r\n    setArticle(initialEditArticle)\r\n  }\r\n\r\n\r\n  const validateArticle= ()=>{\r\n      setErrors([])\r\n      setToast(false)\r\n      errorCount=0\r\n      let tmpErrors=[]\r\n        if(article.status==\"published\"){\r\n        if(article.title_en==\"\"){\r\n          tmpErrors.push(\"Please enter article title (english) before publishing as (published status)\")\r\n           errorCount++\r\n        }\r\n\r\n        if(article.body_en==null & article.type==\"dash\"){\r\n          tmpErrors.push(\"Please enter article body (english) before publishing as (published status)\")\r\n          errorCount++\r\n        } \r\n\r\n        if(article.category==\"\"){\r\n          tmpErrors.push(\"Please select category before publishing as (published status)\")\r\n          errorCount++\r\n      } \r\n\r\n       \r\n\r\n        }\r\n\r\n        if(article.status==\"draft\"){\r\n            if(article.title_en==\"\"){\r\n              tmpErrors.push(\"Please enter article title (english) before publishing as (draft status)\")\r\n          errorCount++\r\n               \r\n            } \r\n            \r\n           \r\n        }\r\n\r\n       \r\n        errorCount>0 && setErrors(prevError=>[...prevError,...tmpErrors])\r\n\r\n       editMode==\"new\" && errorCount==0 && publishArticleApi()\r\n\r\n       editMode==\"update\" && errorCount==0 && updateArticleApi()\r\n       \r\n        \r\n\r\n  }\r\n  \r\n\r\n  const publishArticleApi =()=>{\r\n\r\n    setLoginAction(initialLoginAction)\r\n    setAuthModal(false)\r\n    setApiAction(true)\r\n\r\n    axios.request( {\r\n      method: \"post\", \r\n      headers: authHeader(),\r\n      url: API_URL+\"post/new\", \r\n      data: article\r\n    }).then (response => {\r\n      // updateGallery([])\r\n      //   updateGallery(prevGallery=>[\r\n      //     ...prevGallery,...response.data.data.data.data\r\n      //   ])\r\n      setEditMode(\"update\")\r\n      alert.show(\"New article created\",{type: 'success'})\r\n      history.replace({\r\n        pathname: '/posts/edit/'+response.data.data.data.id,\r\n        //search: '?query=abc',\r\n        id:response.data.data.data.id,\r\n        state: { id: response.data.data.data.id,navType:\"post_save\",data:response.data.data.data }\r\n    });\r\n      console.log(\"post response\",response.data.data.data.id)\r\n      setApiAction(false)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n          case 422:\r\n              KeysToErrorArray(error.response.data.errors)\r\n            break;\r\n            case 409:\r\n              KeysToErrorArray(error.response.data.errors)\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n              setAuthModal(true)\r\n              setLoginAction(prevArticle=>{\r\n                return {...prevArticle,func:validateArticle}\r\n              })\r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{alert.show(\"Invalid response\",{type: 'error'})}\r\n  \r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n\r\n  \r\n  const updateArticleApi =()=>{\r\n    \r\n    setLoginAction(initialLoginAction)  \r\n    setAuthModal(false)\r\n    setApiAction(true)\r\n\r\n     axios.request( {\r\n      method: \"post\", \r\n      headers: authHeader(),\r\n      url: API_URL+\"post/update\", \r\n      data: article\r\n    }).then (response => {\r\n    \r\n      setEditMode(\"update\")\r\n      alert.show(\"Article Updated\",{type: 'success'})\r\n      console.log(\"post response\",response.data.data.data.id)\r\n      setApiAction(false)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n          case 422:\r\n              KeysToErrorArray(error.response.data.errors)\r\n            break;\r\n            case 409:\r\n              KeysToErrorArray(error.response.data.errors)\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n              setAuthModal(true)\r\n              setLoginAction(prevArticle=>{\r\n                return {...prevArticle,func:validateArticle}\r\n              })\r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{alert.show(\"Invalid response\",{type: 'error'})}\r\n\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const fetchArticleByIdApi =(id)=>{\r\n    setLoginAction(initialLoginAction)\r\n    setAuthModal(false)\r\n    setApiAction(true)\r\n\r\n    authHeader()!==\"\" && axios.get( API_URL+\"post/\"+id,{headers: authHeader()}).then (response => {\r\n      setArticle(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n      \r\n     \r\n      console.log(\"post response\",response.data.data.data)\r\n      console.log(\"all articles\",articles)\r\n      setApiAction(false)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n              setAuthModal(true)\r\n              setLoginAction(prevArticle=>{\r\n                return {...prevArticle,func:fetchArticleByIdApi,params:id}\r\n              })\r\n              \r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{alert.show(\"Invalid response\",{type: 'error'})}\r\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      // setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const deleteArticleApi =(id)=>{\r\n    setLoginAction(initialLoginAction)\r\n    setAuthModal(false)\r\n    setApiAction(true)\r\n    //setUsers([])\r\n\r\n    axios.get( API_URL+\"post/delete/\"+id,{headers: authHeader()}).then (response => {\r\n      // setUsers(prevArticle=>{\r\n      //   return {...prevArticle,...response.data.data.data}\r\n      // })\r\n\r\n\r\n      // setPagination(prevArticle=>{\r\n      //   return {...prevArticle,...response.data.data.data}\r\n      // })\r\n       alert.show(\"Article Deleted\",{type: 'success'})\r\n      const newList = articles.filter((item) => item.id !== id);\r\n       setArticles(newList);\r\n     \r\n      //\r\n      console.log(\"post response\",response.data.data.data)\r\n      setApiAction(false)\r\n  \r\n    }).catch(error => {\r\n      setErrors([])\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n             error.response.data.code ==\"402\" && alert.show(error.response.data.status)\r\n               if(!error.response.data.code){\r\n                    setAuthModal(true)\r\n                    setLoginAction(prevArticle=>{\r\n                    return {...prevArticle,func:deleteArticleApi,params:id}\r\n                   })\r\n               }\r\n              \r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{\r\n        //alert.show(\"Invalid response\",{type: 'error'})\r\n      }\r\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      // setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  const fetchArticlesApi =()=>{\r\n    setArticles([])\r\n    setFetching(true)\r\n    setFetchingFailMsg(null)\r\n    setAuthModal(false)\r\n    setLoginAction(initialLoginAction)\r\n    setApiAction(true)\r\n\r\n    //alert(\"Hi there man\")\r\n\r\n    axios.get( API_URL+\"posts\",{headers: authHeader()}).then (response => {\r\n\r\n    \r\n      setArticles(prevArticle=>{\r\n        return [...prevArticle,...response.data.data.data.data]\r\n      })\r\n\r\n      setPagination(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n\r\n      !response.data.data.data.data.length && setFetchingFailMsg(\"No articles found\")\r\n      \r\n      setFetching(false)\r\n      console.log(\"post response all articles\",response.data.data.data)\r\n      setApiAction(false)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setFetching(false)\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n              setAuthModal(true)\r\n              setFetchingFailMsg(\"Waiting for authorization...\") \r\n              setLoginAction(prevArticle=>{\r\n                return {...prevArticle,func:fetchArticlesApi}\r\n              })\r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{alert.show(\"Invalid response\",{type: 'error'})  }\r\n      // error.response!==undefined ? setFetchingFailMsg(\"No articles found\") : setFetchingFailMsg(\"Unknown error\")\r\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      // setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const goToPageApi =(page)=>{\r\n    setArticles([])\r\n    setCurrentPage(page)\r\n    setAuthModal(false)\r\n    setLoginAction(initialLoginAction)\r\n    setApiAction(true)\r\n    setFetchingFailMsg(null) \r\n\r\n    axios.get( pagination.path+\"?page=\"+page,{headers: authHeader()}).then (response => {\r\n      setArticles(prevArticle=>{\r\n        return [...prevArticle,...response.data.data.data.data]\r\n      })\r\n\r\n      setPagination(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n      \r\n     \r\n      console.log(\"post response all articles\",response.data.data.data)\r\n      setApiAction(false)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n              setFetchingFailMsg(\"No articles found\") \r\n              setAuthModal(true)\r\n              setLoginAction(prevArticle=>{\r\n                return {...prevArticle,func:goToPageApi}\r\n              })\r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{\r\n        alert.show(\"Invalid response\",{type: 'error'})\r\n        \r\n      }\r\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      // setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const searchByPhraseApi =()=>{\r\n    \r\n    setArticles([])\r\n    setFetching(true)\r\n    setFetchingFailMsg(null)\r\n    setAuthModal(false)\r\n    setLoginAction(initialLoginAction)\r\n    setApiAction(true)\r\n\r\n    axios.get( API_URL+\"post/search/\"+searchPhrase,{headers: authHeader()}).then (response => {\r\n\r\n      \r\n      setArticles(prevArticle=>{\r\n        return [...prevArticle,...response.data.data.data.data]\r\n      })\r\n\r\n      setPagination(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n      \r\n      setFetching(false)\r\n      !response.data.data.data.length && setFetchingFailMsg(\"No results found...\")\r\n      // alert(JSON.stringify(response.data) )\r\n      console.log(\"get response\",response.data.data.data)\r\n      setApiAction(false)\r\n      //console.log(\"all articles\",articles)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setFetching(false)\r\n      setApiAction(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n              setAuthModal(true)\r\n              setLoginAction(prevArticle=>{\r\n                return {...prevArticle,func:searchByPhraseApi}\r\n              })\r\n            break;\r\n          default:\r\n              !error.response ? alert.show(\"Server currently down\",{type: 'error'}):\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n        }     \r\n        }else{\r\n          alert.show(\"Server currently down\",{type: 'error'})\r\n        }\r\n      }else{alert.show(\"Invalid response\",{type: 'error'})}\r\n      //alert(JSON.stringify(error.response))\r\n      // error.response!==undefined ? setFetchingFailMsg(\"No articles found\") : setFetchingFailMsg(\"Unknown error\")\r\n     \r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const articleContext = {\r\n    article,\r\n    articles,\r\n    updateArticle,\r\n    toast,\r\n    setToast,\r\n    modal,\r\n    setModal,\r\n    errors,\r\n    validateArticle,\r\n    selectedImageFr,\r\n    selectedImageEn,\r\n    setSelectedImageEn,\r\n    setSelectedImageFr,\r\n    setFeaturedFor,\r\n    selectedImageGlobal,\r\n    setSelectedImageGlobal,\r\n    featuredFor,\r\n    editMode,\r\n    setCurrentArticle,\r\n    setArticle,\r\n    setEditMode,\r\n    resetArticle,\r\n    resetEditArticle,\r\n    initialEditArticle,\r\n    toastType,\r\n    setToastType,\r\n    fetchArticleByIdApi,\r\n    fetchArticlesApi,\r\n    pagination,\r\n    goToPageApi,\r\n    currentPage,\r\n    searchPhrase,\r\n    setSearchPhrase,\r\n    searchByPhraseApi,\r\n    setCurrentPage,\r\n    fetching,\r\n    fetchingFailMsg,\r\n    authModal,\r\n    setAuthModal,\r\n    loginAction,\r\n    apiAction,\r\n    setApiAction,\r\n    deleteArticleApi,\r\n    initialLoginAction,\r\n    setLoginAction\r\n\r\n    \r\n\r\n  };\r\n\r\n  // pass the value in provider and return\r\n  return <Context.Provider value={articleContext}  {...props}>{children }</Context.Provider>;\r\n};\r\n\r\n\r\nconst ArticleProvider= {\r\n    Provider,\r\n    Context\r\n};\r\n\r\nProvider.propTypes = {\r\n    article:PropTypes.object,  \r\n};\r\n\r\nProvider.defaultProps = {\r\n  article: {\r\n    title_en: \"\",\r\n    body_en: null,\r\n    featured_en:null,\r\n    title_fr: \"\",\r\n    body_fr: null,\r\n    featured_fr:null,\r\n    status:\"draft\"\r\n  },\r\n\r\n\r\n};\r\n\r\n\r\nexport default ArticleProvider"]},"metadata":{},"sourceType":"module"}