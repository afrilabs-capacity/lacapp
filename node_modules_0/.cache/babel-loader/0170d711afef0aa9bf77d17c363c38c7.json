{"ast":null,"code":"import _toConsumableArray from \"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\react\\\\lac\\\\src\\\\context\\\\UserContext.js\";\n\nimport React, { createContext, useState, useEffect } from \"react\";\nimport { useHistory, useLocation, useParams } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\nvar Context = createContext({});\nvar initialArticle = {\n  id: null,\n  title_en: \"\",\n  body_en: null,\n  featured_en: null,\n  title_fr: \"\",\n  body_fr: null,\n  featured_fr: null,\n  status: \"draft\",\n  category: \"\",\n  created_at: null,\n  updated_at: null\n};\nvar initialEditArticle = {\n  id: null,\n  title_en: \"\",\n  body_en: null,\n  featured_en: null,\n  title_fr: \"\",\n  body_fr: null,\n  featured_fr: null,\n  status: \"draft\",\n  category: \"\",\n  created_at: null,\n  updated_at: null\n};\nvar API_URL = \"http://192.168.43.122:8080/laravel/site40/public/api/v1/\";\n\nvar Provider = function Provider(props) {\n  // Initial values are obtained from the props\n  var initialUser = {\n    username: \"\",\n    email: \"\",\n    role: \"editor\"\n  };\n  var childrens = props.childrens; // Use State to keep the values\n\n  var _useState = useState(initialUser),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      users = _useState4[0],\n      setUsers = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pagination = _useState6[0],\n      setPagination = _useState6[1];\n\n  var _useState7 = useState(1),\n      _useState8 = _slicedToArray(_useState7, 2),\n      currentPage = _useState8[0],\n      setCurrentPage = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      searchPhrase = _useState10[0],\n      setSearchPhrase = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      errors = _useState12[0],\n      setErrors = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      fetching = _useState14[0],\n      setFetching = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      fetchingFailMsg = _useState16[0],\n      setFetchingFailMsg = _useState16[1]; // const [featuredFor,setFeaturedFor]=useState(\"\")\n\n\n  useEffect(function () {//alert(JSON.stringify(user))\n  }, [user]);\n\n  var updateUser = function updateUser(dataKey, data) {\n    //console.log(\"data key\", dataKey) \n    return setUser(function (prevState) {\n      var newState = _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, dataKey, data));\n\n      return newState;\n    });\n  };\n\n  var addUserApi = function addUserApi() {\n    axios.request({\n      method: \"post\",\n      url: API_URL + \"users/add\",\n      data: article\n    }).then(function (response) {\n      // updateGallery([])\n      //   updateGallery(prevGallery=>[\n      //     ...prevGallery,...response.data.data.data.data\n      //   ])\n      setEditMode(\"update\");\n      history.replace({\n        pathname: '/posts/edit/' + response.data.data.data.id,\n        //search: '?query=abc',\n        id: response.data.data.data.id,\n        state: {\n          id: response.data.data.data.id,\n          navType: \"post_save\",\n          data: response.data.data.data\n        }\n      });\n      console.log(\"post response\", response.data.data.data.id);\n    }).catch(function (error) {\n      setErrors([]);\n      error.response.status == 409 ? setErrors(function (prevError) {\n        return [].concat(_toConsumableArray(prevError), [error.response.data.message]);\n      }) : setErrors(function (prevError) {\n        return [].concat(_toConsumableArray(prevError), [error.response.statusText]);\n      }); //console.log(\"error\",error.response)\n    });\n  };\n\n  var fetchUsersApi = function fetchUsersApi() {\n    setUsers([]);\n    setFetching(true); //alert(\"Hi there man\")\n\n    axios.get(API_URL + \"programmes\").then(function (response) {\n      console.log(\"fetch articles\", response.data.data.data.data);\n      setUsers(function (prevArticle) {\n        return [].concat(_toConsumableArray(prevArticle), _toConsumableArray(response.data.data.data.data));\n      });\n      setPagination(function (prevArticle) {\n        return _objectSpread(_objectSpread({}, prevArticle), response.data.data.data);\n      });\n      setFetching(false);\n      console.log(\"post response all articles\", response.data.data.data);\n    }).catch(function (error) {\n      setErrors([]);\n      setFetching(false);\n      error.response !== undefined ? setFetchingFailMsg(\"No programmes found\") : setFetchingFailMsg(\"Unknown error\"); // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n      // setErrors(prevError=>[...prevError,apiStatus])\n    });\n  };\n\n  var goToPageApi = function goToPageApi(page) {\n    setUsers([]);\n    setCurrentPage(page);\n    axios.get(pagination.path + \"?page=\" + page).then(function (response) {\n      setUsers(function (prevArticle) {\n        return [].concat(_toConsumableArray(prevArticle), _toConsumableArray(response.data.data.data.data));\n      });\n      setPagination(function (prevArticle) {\n        return _objectSpread(_objectSpread({}, prevArticle), response.data.data.data);\n      });\n      console.log(\"post response all articles\", response.data.data.data);\n    }).catch(function (error) {\n      setErrors([]);\n      var apiStatus = error.response !== undefined ? error.response.statusText : \"Unknown error\";\n      setErrors(function (prevError) {\n        return [].concat(_toConsumableArray(prevError), [apiStatus]);\n      });\n    });\n  };\n\n  var searchByPhraseApi = function searchByPhraseApi() {\n    setUsers([]);\n    setFetching(true);\n    setFetchingFailMsg(null);\n    axios.get(API_URL + \"programmes/search/\" + searchPhrase).then(function (response) {\n      setUsers(function (prevArticle) {\n        return [].concat(_toConsumableArray(prevArticle), _toConsumableArray(response.data.data.data.data));\n      });\n      setPagination(function (prevArticle) {\n        return _objectSpread(_objectSpread({}, prevArticle), response.data.data.data);\n      });\n      setFetching(false);\n      !response.data.data.data.length && setFetchingFailMsg(\"No results found...\");\n      console.log(\"get response\", response.data.data.data); //console.log(\"all articles\",articles)\n    }).catch(function (error) {\n      setErrors([]);\n      setFetching(false);\n      error.response !== undefined ? setFetchingFailMsg(\"No articles found\") : setFetchingFailMsg(\"Unknown error\"); // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n      // setErrors(prevError=>[...prevError,apiStatus])\n    });\n  };\n\n  var articleContext = {\n    user: user,\n    users: users,\n    fetchUsersApi: fetchUsersApi,\n    pagination: pagination,\n    goToPageApi: goToPageApi,\n    currentPage: currentPage,\n    searchPhrase: searchPhrase,\n    setSearchPhrase: setSearchPhrase,\n    searchByPhraseApi: searchByPhraseApi,\n    fetching: fetching,\n    fetchingFailMsg: fetchingFailMsg,\n    updateUser: updateUser,\n    addUserApi: addUserApi\n  }; // pass the value in provider and return\n\n  return /*#__PURE__*/React.createElement(Context.Provider, Object.assign({\n    value: articleContext\n  }, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 10\n    }\n  }));\n};\n\nvar UserProvider = {\n  Provider: Provider,\n  Context: Context\n};\nexport default UserProvider;","map":{"version":3,"sources":["C:/react/lac/src/context/UserContext.js"],"names":["React","createContext","useState","useEffect","useHistory","useLocation","useParams","PropTypes","axios","Context","initialArticle","id","title_en","body_en","featured_en","title_fr","body_fr","featured_fr","status","category","created_at","updated_at","initialEditArticle","API_URL","Provider","props","initialUser","username","email","role","childrens","user","setUser","users","setUsers","pagination","setPagination","currentPage","setCurrentPage","searchPhrase","setSearchPhrase","errors","setErrors","fetching","setFetching","fetchingFailMsg","setFetchingFailMsg","updateUser","dataKey","data","prevState","newState","addUserApi","request","method","url","article","then","response","setEditMode","history","replace","pathname","state","navType","console","log","catch","error","prevError","message","statusText","fetchUsersApi","get","prevArticle","undefined","goToPageApi","page","path","apiStatus","searchByPhraseApi","length","articleContext","UserProvider"],"mappings":"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","sourcesContent":["import React, { createContext, useState,useEffect} from \"react\";\r\nimport { useHistory,useLocation,useParams } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport axios from \"axios\"\r\n\r\nconst Context = createContext({});\r\n\r\nconst initialArticle={\r\n    id:null,\r\n    title_en: \"\",\r\n    body_en: null,\r\n    featured_en:null,\r\n    title_fr: \"\",\r\n    body_fr: null,\r\n    featured_fr:null,\r\n    status:\"draft\",\r\n    category:\"\",\r\n    created_at:null,\r\n    updated_at:null\r\n}\r\n\r\n\r\nconst initialEditArticle={\r\n id:null,\r\n title_en: \"\",\r\n body_en: null,\r\n featured_en:null,\r\n title_fr: \"\",\r\n body_fr: null,\r\n featured_fr:null,\r\n status:\"draft\",\r\n category:\"\",\r\n created_at:null,\r\n updated_at:null\r\n}\r\n\r\n\r\nconst API_URL = \"http://192.168.43.122:8080/laravel/site40/public/api/v1/\";\r\n\r\n const Provider = props => {\r\n  // Initial values are obtained from the props\r\n\r\n\r\nconst initialUser={\r\n   username:\"\",\r\n   email:\"\",\r\n   role:\"editor\"\r\n}\r\n \r\n  const {\r\n    // article:initialArticle,\r\n    childrens\r\n  } = props;\r\n\r\n  // Use State to keep the values\r\n  const [user,setUser] = useState(initialUser);\r\n  const [users,setUsers] = useState([]);\r\n  const [pagination,setPagination] = useState({});\r\n  const [currentPage,setCurrentPage]=useState(1)\r\n  const [searchPhrase,setSearchPhrase]=useState(\"\")\r\n  const [errors,setErrors]=useState([])\r\n  const [fetching,setFetching]=useState(false)\r\n  const [fetchingFailMsg,setFetchingFailMsg]=useState(null)\r\n\r\n  // const [featuredFor,setFeaturedFor]=useState(\"\")\r\n  useEffect(()=>{\r\n  //alert(JSON.stringify(user))\r\n  },[user])\r\n\r\n  \r\n  \r\n\r\n  const updateUser=(dataKey,data)=> \r\n  {\r\n     //console.log(\"data key\", dataKey) \r\n    return setUser(prevState => { \r\n         let newState=({...prevState,[dataKey]: data})\r\n          return newState\r\n        })  \r\n  }\r\n\r\n  const addUserApi =()=>{\r\n\r\n    axios.request( {\r\n      method: \"post\", \r\n      url: API_URL+\"users/add\", \r\n      data: article\r\n    }).then (response => {\r\n      // updateGallery([])\r\n      //   updateGallery(prevGallery=>[\r\n      //     ...prevGallery,...response.data.data.data.data\r\n      //   ])\r\n      setEditMode(\"update\")\r\n      history.replace({\r\n        pathname: '/posts/edit/'+response.data.data.data.id,\r\n        //search: '?query=abc',\r\n        id:response.data.data.data.id,\r\n        state: { id: response.data.data.data.id,navType:\"post_save\",data:response.data.data.data }\r\n    });\r\n      console.log(\"post response\",response.data.data.data.id)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      error.response.status==409 ? setErrors(prevError=>[...prevError,error.response.data.message]) :setErrors(prevError=>[...prevError,error.response.statusText])\r\n      //console.log(\"error\",error.response)\r\n      \r\n  });\r\n\r\n  }\r\n\r\n  \r\n\r\n  const fetchUsersApi =()=>{\r\n    setUsers([])\r\n    setFetching(true)\r\n\r\n    //alert(\"Hi there man\")\r\n\r\n    axios.get( API_URL+\"programmes\").then (response => {\r\n\r\n      console.log(\"fetch articles\",response.data.data.data.data)\r\n      setUsers(prevArticle=>{\r\n        return [...prevArticle,...response.data.data.data.data]\r\n      })\r\n\r\n      setPagination(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n      \r\n      setFetching(false)\r\n      console.log(\"post response all articles\",response.data.data.data)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setFetching(false)\r\n      error.response!==undefined ? setFetchingFailMsg(\"No programmes found\") : setFetchingFailMsg(\"Unknown error\")\r\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      // setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const goToPageApi =(page)=>{\r\n    setUsers([])\r\n    setCurrentPage(page)\r\n\r\n    axios.get( pagination.path+\"?page=\"+page).then (response => {\r\n        setUsers(prevArticle=>{\r\n        return [...prevArticle,...response.data.data.data.data]\r\n      })\r\n\r\n      setPagination(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n      \r\n     \r\n      console.log(\"post response all articles\",response.data.data.data)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const searchByPhraseApi =()=>{\r\n    \r\n    setUsers([])\r\n    setFetching(true)\r\n    setFetchingFailMsg(null)\r\n\r\n    axios.get( API_URL+\"programmes/search/\"+searchPhrase).then (response => {\r\n\r\n      \r\n        setUsers(prevArticle=>{\r\n        return [...prevArticle,...response.data.data.data.data]\r\n      })\r\n\r\n      setPagination(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n      \r\n      setFetching(false)\r\n      !response.data.data.data.length && setFetchingFailMsg(\"No results found...\")\r\n      console.log(\"get response\",response.data.data.data)\r\n      //console.log(\"all articles\",articles)\r\n    }).catch(error => {\r\n      setErrors([])\r\n      setFetching(false)\r\n     \r\n      error.response!==undefined ? setFetchingFailMsg(\"No articles found\") : setFetchingFailMsg(\"Unknown error\")\r\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      // setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n\r\n  }\r\n\r\n\r\n  const articleContext = {\r\n    user,\r\n    users,\r\n    fetchUsersApi,\r\n    pagination,\r\n    goToPageApi,\r\n    currentPage,\r\n    searchPhrase,\r\n    setSearchPhrase,\r\n    searchByPhraseApi,\r\n    fetching,\r\n    fetchingFailMsg,\r\n    updateUser,\r\n    addUserApi \r\n  };\r\n\r\n  // pass the value in provider and return\r\n  return <Context.Provider value={articleContext}  {...props}></Context.Provider>;\r\n};\r\n\r\n\r\nconst UserProvider= {\r\n    Provider,\r\n    Context\r\n};\r\n\r\n\r\nexport default UserProvider"]},"metadata":{},"sourceType":"module"}