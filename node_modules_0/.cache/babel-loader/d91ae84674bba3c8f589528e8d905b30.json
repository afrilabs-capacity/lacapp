{"ast":null,"code":"import _defineProperty from \"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\react\\\\lac\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\react\\\\lac\\\\src\\\\modals\\\\image-upload-modal.js\";\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { CModal, CModalHeader, CButton, CModalBody, CModalFooter, CRow, CCol, CProgress } from '@coreui/react';\nimport ArticleProvider from \"../context/ArticleContext\";\nimport PgCatProvider from \"../context/PgCatContext\";\nimport GalleryProvider from \"../context/GalleryContext\";\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport axios from \"axios\";\nimport { useAlert } from 'react-alert';\nimport authHeader from \"../services/auth-header\";\nvar API_URL = \"http://192.168.43.122:8080/laravel/site40/public/api/v1/\";\nvar PUBLIC_URL = \"http://192.168.43.122:8080/laravel/site40/public\";\nvar Styles = {\n  link: {\n    textDecoration: \"underline\",\n    fontSize: \"11px\",\n    color: \"green\"\n  },\n  Titles: {\n    color: \"black\"\n  },\n  Theme: {\n    background: \"rgb(250, 252, 255)\"\n  }\n};\n\nvar ModalMe = function ModalMe(_ref) {\n  var _React$createElement;\n\n  var showToast = _ref.showToast;\n\n  var _useContext = useContext(ArticleProvider.Context),\n      initialLoginAction = _useContext.initialLoginAction,\n      setLoginAction = _useContext.setLoginAction,\n      setAuthModal = _useContext.setAuthModal,\n      selectedImageGlobal = _useContext.selectedImageGlobal,\n      setSelectedImageGlobal = _useContext.setSelectedImageGlobal,\n      updateArticle = _useContext.updateArticle,\n      article = _useContext.article,\n      setArticle = _useContext.setArticle,\n      featuredFor = _useContext.featuredFor,\n      setSelectedImageEn = _useContext.setSelectedImageEn,\n      setSelectedImageFr = _useContext.setSelectedImageFr,\n      modal = _useContext.modal,\n      setModal = _useContext.setModal;\n\n  var _useContext2 = useContext(GalleryProvider.Context),\n      boy = _useContext2.boy,\n      uploadProgress = _useContext2.uploadProgress,\n      setUploadProgress = _useContext2.setUploadProgress;\n\n  var alert = useAlert();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      gallery = _useState2[0],\n      updateGallery = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedImage = _useState4[0],\n      setSelectedImage = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedImageId = _useState6[0],\n      setSelectedImageId = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      fileType = _useState8[0],\n      setFileType = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      fileName = _useState10[0],\n      setFileName = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      fileSize = _useState12[0],\n      setFileSize = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      fileDimension = _useState14[0],\n      setFileDimension = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      fileUploadedOn = _useState16[0],\n      setFileUploadedOn = _useState16[1];\n\n  var _useState17 = useState({}),\n      _useState18 = _slicedToArray(_useState17, 2),\n      pagination = _useState18[0],\n      setPagination = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      hasMore = _useState20[0],\n      setHasMore = _useState20[1];\n\n  var _useState21 = useState(null),\n      _useState22 = _slicedToArray(_useState21, 2),\n      successMsg = _useState22[0],\n      setSuccessMsg = _useState22[1];\n\n  var _useState23 = useState(false),\n      _useState24 = _slicedToArray(_useState23, 2),\n      uploading = _useState24[0],\n      setUploading = _useState24[1]; //const [loginAction,setLoginAction] =useState(initialLoginAction)\n\n\n  var loadMore = false;\n  var selectedImageIdv = null;\n\n  var triggerSelectInput = function triggerSelectInput(e, input) {\n    e.preventDefault();\n    input.click();\n  };\n\n  useEffect(function () {\n    var uploadBt = document.getElementById(\"modal-upload-bt\");\n    var uploadInput = document.getElementById(\"modal-upload-input\");\n    uploadBt.addEventListener(\"click\", function (e) {\n      return triggerSelectInput(e, uploadInput);\n    }); // document.addEventListener(\"click\",(e)=>{ \n    //   if (e.target.tagName == 'A' && e.target.classList.contains(\"acpb_featured_delete\")) {\n    //     e.preventDefault(); \n    //     deletePhoto()\n    //     //setSelectedImageEn(\"\")\n    //     //updateArticle(\"featured_en\",null)\n    //   }\n    // })\n    //console.log(\"gallery from useEffect\",gallery)\n\n    fetchGallery();\n  }, []);\n  useEffect(function () {\n    if (pagination.next_page_url && pagination.next_page_url !== null) {\n      setHasMore(true); //alert.show(pagination.next_page_url,{type: 'error',position:\"bottom center\"})\n    } else {\n      setHasMore(false);\n    }\n  }, [pagination]);\n  useEffect(function () {\n    selectedImageIdv = selectedImageId;\n  }, [selectedImageId]);\n\n  var fetchGallery = function fetchGallery(async) {\n    updateGallery([]);\n    setSelectedImage(\"\");\n    setSelectedImageId(\"\");\n    axios.request({\n      method: \"get\",\n      url: API_URL + \"photo/all\",\n      // data: data, \n      onUploadProgress: function onUploadProgress(p) {\n        setUploadProgress(function (prevProgress) {\n          return prevProgress + Math.round(100 * p.loaded / p.total);\n        }); //console.log(\"upload progress\",p.total/p.loaded)\n      }\n    }).then(function (response) {\n      //console.log(\"response file name\",response.data.data.data.data)\n      updateGallery(function (prevGallery) {\n        return [].concat(_toConsumableArray(prevGallery), _toConsumableArray(response.data.data.data.data));\n      });\n      setPagination(function (prevArticle) {\n        return _objectSpread(_objectSpread({}, prevArticle), response.data.data.data);\n      }); // console.log(\"initial api fetch\",response)\n    });\n  };\n\n  var deletePhoto = function deletePhoto() {\n    //updateGallery([])\n    setLoginAction(initialLoginAction);\n    axios.get(API_URL + \"photo/delete/\" + selectedImageId, {\n      headers: authHeader()\n    }).then(function (response) {\n      //fetchGallery()\n      var newList = gallery.filter(function (item) {\n        return item.id !== selectedImageId;\n      });\n      updateGallery(newList);\n      setSelectedImage(\"\");\n      console.log('delete image response', response);\n    }).catch(function (error) {\n      if (error.response) {\n        if (error.response.status) {\n          switch (error.response.status) {\n            case 500:\n              alert.show(error.response.statusText, {\n                type: 'error'\n              });\n              break;\n\n            case 401:\n              alert.show(\"Token error\", {\n                type: 'notice'\n              });\n              setAuthModal(true);\n              setLoginAction(function (prevArticle) {\n                return _objectSpread(_objectSpread({}, prevArticle), {}, {\n                  func: deletePhoto,\n                  params: selectedImageId\n                });\n              });\n              break;\n\n            default:\n              !error.response ? setSuccessMsg(\"Server currently down\") : setSuccessMsg(error.response.statusText);\n          }\n        } else {\n          setSuccessMsg(\"Server currently down\");\n        }\n      } else {\n        setSuccessMsg(\"Invalid response\");\n      } // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n      // setErrors(prevError=>[...prevError,apiStatus])\n\n    });\n  };\n\n  var LoadMore = function LoadMore() {\n    pagination.next_page_url == null && setHasMore(false);\n    pagination.next_page_url !== null && axios.request({\n      method: \"get\",\n      url: pagination.next_page_url\n    }).then(function (response) {\n      //console.log(\"response file name\",response.data.data.data.data)\n      updateGallery(function (prevGallery) {\n        return [].concat(_toConsumableArray(prevGallery), _toConsumableArray(response.data.data.data.data));\n      });\n      setPagination(function (prevArticle) {\n        return _objectSpread(_objectSpread({}, prevArticle), response.data.data.data);\n      }); // console.log(\"initial api fetch\",response)\n    });\n  };\n\n  var _onChange = function onChange(e) {\n    //console.log(e.target.value)\n    setUploadProgress(0);\n    var file = null;\n    file = e.target.files[0] || e.dataTransfer.files[0];\n    e.target.value = \"\";\n    var allowed_mime_types = ['image/jpeg', 'image/png'];\n    var allowed_size_mb = 2;\n\n    if (allowed_mime_types.indexOf(file.type) == -1) {\n      //alert('Error : Incorrect file type');\n      setSuccessMsg(\"Incorrect file type\"); //alert.show(\"Incorrect file type\",{type: 'error',position:\"top right\",containerStyle:{zIndex: 4}})\n\n      return;\n    }\n\n    if (file.size > allowed_size_mb * 1024 * 1024) {\n      //alert('Error : Exceeded size');\n      setSuccessMsg(\"Size limit of 2mb Exceeded\"); //alert.show(\"Size limit of 1mb Exceeded\",{type: 'error',position:\"top right\"})\n\n      return;\n    } //alert(\"on change for loading files\")\n\n\n    if (!file) return; // \n\n    setSuccessMsg(null);\n    setUploading(true); //this.createImage(files[0]);\n\n    var reader = new FileReader();\n\n    reader.onload = function (e) {//setImage(reader.result)\n      //console.log(reader.result)\n    };\n\n    reader.readAsDataURL(file);\n    var data = new FormData();\n    data.append(\"file\", file);\n    axios.request({\n      method: \"post\",\n      url: API_URL + \"photo/upload\",\n      data: data,\n      onUploadProgress: function onUploadProgress(p) {\n        setUploadProgress(function (prevProgress) {\n          return prevProgress + Math.round(100 * p.loaded / p.total);\n        }); //console.log(\"upload progress\",p.total/p.loaded)\n      }\n    }).then(function (response) {\n      updateGallery([]); //setHasMore(true)\n      // updateGallery(prevGallery=>[\n      //   ...prevGallery,...response.data.data.data.data\n      // ])\n      // setPagination(prevArticle=>{\n      //   return {...prevArticle,...response.data.data.data}\n      // })\n      //alert.show(\"Success\",{type: 'success'})\n      //console.log(\"Adding new image\",response.data.data.data)\n      //  updateGallery(prevGallery=>[\n      //   ...prevGallery,response.data.data.data\n      // ])\n      //fetchGallery()\n\n      var imageBig = PUBLIC_URL + response.data.data.data.img_big;\n      var newList = gallery.splice(0, 0, response.data.data.data);\n      setSelectedImage(imageBig);\n      setSelectedImageId(response.data.data.data.id);\n      setFileType(response.data.data.data.file_type);\n      setFileName(response.data.data.data.file_original_name);\n      setFileSize(response.data.data.data.file_size);\n      setFileUploadedOn(response.data.data.data.created_at);\n      updateGallery(newList);\n      setUploading(false);\n    }).catch(function (error) {\n      setUploading(false);\n\n      if (error.response) {\n        if (error.response.status) {\n          switch (error.response.status) {\n            case 500:\n              alert.show(error.response.statusText, {\n                type: 'error'\n              });\n              break;\n\n            case 401:\n              //alert.show(\"Token error\",{type:'notice'})\n              // setAuthModal(true)\n              // setLoginAction(prevArticle=>{\n              //   return {...prevArticle,func:fetchArticleByIdApi,params:id}\n              // })\n              break;\n\n            default:\n              !error.response ? setSuccessMsg(\"Server currently down\") : setSuccessMsg(error.response.statusText);\n          }\n        } else {\n          setSuccessMsg(\"Server currently down\");\n        }\n      } else {\n        setSuccessMsg(\"Invalid response\");\n      } // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\n      // setErrors(prevError=>[...prevError,apiStatus])\n\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CModal, {\n    size: \"lg\",\n    show: modal,\n    onClose: function onClose() {\n      setModal(!modal);\n      setSuccessMsg(null);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CModalHeader, {\n    closeButton: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 11\n    }\n  }, \"Gallery\")), /*#__PURE__*/React.createElement(CModalBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CRow, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CCol, {\n    md: \"8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, gallery.length ? /*#__PURE__*/React.createElement(InfiniteScroll, {\n    dataLength: gallery.length,\n    next: function next() {\n      return LoadMore();\n    },\n    hasMore: hasMore,\n    loader: \"\",\n    scrollableTarget: \"scrollableDiv\",\n    endMessage: /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 15\n      }\n    })),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    id: \"scrollableDiv\",\n    style: {\n      overflowY: \"auto\",\n      height: \"370px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex flex-row flex-wrap align-items-start\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 23\n    }\n  }, gallery.length && gallery.map(function (val, k) {\n    var imgSmall = PUBLIC_URL + val.img_small;\n    var imageBig = PUBLIC_URL + val.img_big; //alert(\"check\")\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      style: {\n        padding: \"1em\",\n        cursor: \"pointer\"\n      },\n      key: k,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: imgSmall,\n      className: 'img-thumbnail',\n      onClick: function onClick() {\n        //let imageSource=document.getElementById(\"modal-selected-image\").src.value=val\n        setSelectedImage(imageBig);\n        setSelectedImageId(val.id);\n        setFileType(val.file_type);\n        setFileName(val.file_original_name);\n        setFileSize(val.file_size);\n        setFileUploadedOn(val.created_at);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 15\n      }\n    }));\n  }))))) : \"\"), gallery.length ? \"Showing \" : /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 46\n    }\n  }, \"No images found\"), /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 17\n    }\n  }, gallery.length ? pagination.from : \"\"), \"-\", /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 62\n    }\n  }, gallery.length ? pagination.to : \"\"), \" \", gallery.length ? \"results of\" : \"\", \" \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 140\n    }\n  }, gallery.length ? Math.ceil(pagination.total / pagination.per_page) : \"\", \" \", gallery.length ? \"pages\" : \"\"), \"  \", hasMore ? /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 262\n    }\n  }, \"(scroll down for more images)\") : \"\"), /*#__PURE__*/React.createElement(CCol, {\n    md: \"4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: 'img-fluid',\n    id: \"modal-selected-image\",\n    src: selectedImage !== \"\" ? selectedImage : \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 15\n    }\n  }), selectedImage !== \"\" && /*#__PURE__*/React.createElement(\"p\", {\n    align: \"center\",\n    id: \"acpb_ft_rm_fr\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 38\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", (_React$createElement = {\n    href: \"\",\n    style: Styles.link,\n    id: \"acpb_del_ft\",\n    className: \"acpb_featured_delete\"\n  }, _defineProperty(_React$createElement, \"style\", {\n    color: \"red\",\n    textDecoration: \"underline\"\n  }), _defineProperty(_React$createElement, \"onClick\", function onClick(e) {\n    e.preventDefault();\n    deletePhoto();\n  }), _defineProperty(_React$createElement, \"__self\", _this), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 419,\n    columnNumber: 75\n  }), _React$createElement), \"delete\")), selectedImage !== \"\" && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 18\n    }\n  }, \"File name:\"), \" \", fileName), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 18\n    }\n  }, \"File type:\"), \" \", fileType), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 18\n    }\n  }, \"File size:\"), \" \", fileSize, \"kb\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 18\n    }\n  }, \"Uploaded on:\"), \" \", fileUploadedOn)))), /*#__PURE__*/React.createElement(CRow, {\n    className: \"d-flex flex-row justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CCol, {\n    md: \"4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"modal-upload-input\",\n    type: \"file\",\n    hidden: true,\n    onChange: function onChange(e) {\n      return _onChange(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 15\n    }\n  }), uploading ? /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary px-4 w-100\",\n    disabled: uploading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"spinner-grow spinner-grow-sm\",\n    role: \"status\",\n    \"aria-hidden\": \"true\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 23\n    }\n  }), \"\\xA0 Uploading...\") : /*#__PURE__*/React.createElement(CButton, {\n    id: \"modal-upload-bt\",\n    color: \"primary\",\n    size: \"md\",\n    block: true,\n    md: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 33\n    }\n  }, \"Add IMage\"), /*#__PURE__*/React.createElement(CProgress, {\n    className: \"progress-xs\",\n    color: \"success\",\n    value: uploadProgress,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 15\n    }\n  }), successMsg !== null && /*#__PURE__*/React.createElement(\"b\", {\n    style: {\n      color: \"red\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 37\n    }\n  }, successMsg)))), /*#__PURE__*/React.createElement(CModalFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CButton, {\n    color: \"primary\",\n    onClick: function onClick() {\n      if (featuredFor !== \"\") {\n        //setting featured image\n        setModal(function (prev) {\n          return !prev;\n        }); //console.log(\"selected Image\",selectedImage)\n        //console.log(\"Featured For\",featuredFor)\n\n        if (featuredFor == \"acpb_en_ft\") {\n          updateArticle(\"featured_en\", selectedImage);\n          setSelectedImageEn(selectedImage);\n        } else {\n          updateArticle(\"featured_fr\", selectedImage);\n          setSelectedImageFr(selectedImage);\n        }\n      } else {\n        //setting featured image\n        setModal(function (prev) {\n          return !prev;\n        });\n        selectedImage !== \"\" && setSelectedImageGlobal(selectedImage);\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 11\n    }\n  }, \"OK\"), ' ', /*#__PURE__*/React.createElement(CButton, {\n    color: \"secondary\",\n    onClick: function onClick() {\n      setModal(!modal);\n      setSuccessMsg(null);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 11\n    }\n  }, \"Cancel\"))));\n};\n\nexport default ModalMe;","map":{"version":3,"sources":["C:/react/lac/src/modals/image-upload-modal.js"],"names":["React","useContext","useEffect","useState","CModal","CModalHeader","CButton","CModalBody","CModalFooter","CRow","CCol","CProgress","ArticleProvider","PgCatProvider","GalleryProvider","InfiniteScroll","axios","useAlert","authHeader","API_URL","PUBLIC_URL","Styles","link","textDecoration","fontSize","color","Titles","Theme","background","ModalMe","showToast","Context","initialLoginAction","setLoginAction","setAuthModal","selectedImageGlobal","setSelectedImageGlobal","updateArticle","article","setArticle","featuredFor","setSelectedImageEn","setSelectedImageFr","modal","setModal","boy","uploadProgress","setUploadProgress","alert","gallery","updateGallery","selectedImage","setSelectedImage","selectedImageId","setSelectedImageId","fileType","setFileType","fileName","setFileName","fileSize","setFileSize","fileDimension","setFileDimension","fileUploadedOn","setFileUploadedOn","pagination","setPagination","hasMore","setHasMore","successMsg","setSuccessMsg","uploading","setUploading","loadMore","selectedImageIdv","triggerSelectInput","e","input","preventDefault","click","uploadBt","document","getElementById","uploadInput","addEventListener","fetchGallery","next_page_url","async","request","method","url","onUploadProgress","p","prevProgress","Math","round","loaded","total","then","response","prevGallery","data","prevArticle","deletePhoto","get","headers","newList","filter","item","id","console","log","catch","error","status","show","statusText","type","func","params","LoadMore","onChange","file","target","files","dataTransfer","value","allowed_mime_types","allowed_size_mb","indexOf","size","reader","FileReader","onload","readAsDataURL","FormData","append","imageBig","img_big","splice","file_type","file_original_name","file_size","created_at","length","textAlign","overflowY","height","map","val","k","imgSmall","img_small","padding","cursor","from","to","ceil","per_page","prev"],"mappings":"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","sourcesContent":["import React,{useContext,useEffect,useState} from \"react\"\r\nimport {\r\n    CModal,\r\n    CModalHeader,\r\n    CButton,\r\n    CModalBody,\r\n    CModalFooter,\r\n    CRow,\r\n    CCol,\r\n    CProgress\r\n  } from '@coreui/react'\r\n  import ArticleProvider from \"../context/ArticleContext\"\r\n  import PgCatProvider from \"../context/PgCatContext\"\r\n  import GalleryProvider from \"../context/GalleryContext\";\r\n  import InfiniteScroll from 'react-infinite-scroll-component';\r\n  import axios from \"axios\";\r\n  import { useAlert } from 'react-alert'\r\n  import authHeader from \"../services/auth-header\";\r\n\r\n\r\n  const API_URL = \"http://192.168.43.122:8080/laravel/site40/public/api/v1/\";\r\n\r\n  const PUBLIC_URL = \"http://192.168.43.122:8080/laravel/site40/public\";\r\n\r\n  const Styles={\r\n    link:{\r\n      textDecoration:\"underline\",\r\n      fontSize:\"11px\",\r\n      color:\"green\"\r\n    },\r\n    Titles:{\r\n      color:\"black\"\r\n    },\r\n    Theme:{\r\n      background:\"rgb(250, 252, 255)\"\r\n    }\r\n  }\r\n    \r\n\r\n\r\nconst ModalMe=({showToast})=>{\r\n\r\n  const {initialLoginAction,setLoginAction,setAuthModal,selectedImageGlobal,setSelectedImageGlobal,updateArticle,article,setArticle,featuredFor,setSelectedImageEn,setSelectedImageFr,modal,setModal}=useContext(ArticleProvider.Context)\r\n  const {boy,uploadProgress,setUploadProgress} = useContext(GalleryProvider.Context)\r\n  const alert = useAlert()\r\n\r\n  \r\n\r\n  const [gallery,updateGallery]=useState([])\r\n\r\n  const [selectedImage,setSelectedImage]=useState(\"\")\r\n  const [selectedImageId,setSelectedImageId]=useState(\"\")\r\n  const [fileType,setFileType]=useState(\"\")\r\n  const [fileName,setFileName]=useState(\"\")\r\n  const [fileSize,setFileSize]=useState(\"\")\r\n  const [fileDimension,setFileDimension]=useState(\"\")\r\n  const [fileUploadedOn,setFileUploadedOn]=useState(\"\")\r\n  const [pagination,setPagination] = useState({});\r\n  const [hasMore,setHasMore] = useState(false);\r\n  const [successMsg,setSuccessMsg] = useState(null);\r\n  const [uploading,setUploading] = useState(false);\r\n  //const [loginAction,setLoginAction] =useState(initialLoginAction)\r\n\r\n  let loadMore=false\r\n\r\n  let selectedImageIdv=null\r\n\r\n  const triggerSelectInput=(e,input)=>{\r\n    e.preventDefault()\r\n     input.click()\r\n}\r\n\r\nuseEffect(()=>{\r\n  const uploadBt=document.getElementById(\"modal-upload-bt\")\r\n  const uploadInput=document.getElementById(\"modal-upload-input\")\r\n  uploadBt.addEventListener(\"click\",(e)=>triggerSelectInput(e,uploadInput))\r\n  // document.addEventListener(\"click\",(e)=>{ \r\n  //   if (e.target.tagName == 'A' && e.target.classList.contains(\"acpb_featured_delete\")) {\r\n  //     e.preventDefault(); \r\n  //     deletePhoto()\r\n  //     //setSelectedImageEn(\"\")\r\n  //     //updateArticle(\"featured_en\",null)\r\n  //   }\r\n  // })\r\n  //console.log(\"gallery from useEffect\",gallery)\r\n\r\n   fetchGallery()\r\n},[])\r\n\r\n\r\nuseEffect(()=>{\r\nif(pagination.next_page_url && pagination.next_page_url!==null){\r\n  setHasMore(true)\r\n//alert.show(pagination.next_page_url,{type: 'error',position:\"bottom center\"})\r\n}else{\r\n  setHasMore(false)\r\n} \r\n},[pagination])\r\n\r\nuseEffect(()=>{\r\n  selectedImageIdv=selectedImageId\r\n  },[selectedImageId])\r\n\r\n const fetchGallery=async=>{\r\n  updateGallery([])\r\n  setSelectedImage(\"\")\r\n  setSelectedImageId(\"\")\r\n  axios.request( {\r\n    method: \"get\", \r\n    url: API_URL+\"photo/all\", \r\n    // data: data, \r\n    onUploadProgress: (p) => {\r\n       setUploadProgress(prevProgress=>prevProgress+Math.round((100 * p.loaded) / p.total))\r\n       //console.log(\"upload progress\",p.total/p.loaded)\r\n    }\r\n\r\n\r\n  }).then (response => {\r\n      //console.log(\"response file name\",response.data.data.data.data)\r\n    \r\n      updateGallery(prevGallery=>[\r\n        ...prevGallery,...response.data.data.data.data\r\n      ])\r\n\r\n      setPagination(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n\r\n     // console.log(\"initial api fetch\",response)\r\n  })\r\n\r\n }\r\n\r\n\r\n const deletePhoto=()=>{\r\n  //updateGallery([])\r\n  setLoginAction(initialLoginAction)\r\n\r\n   axios.get(API_URL+\"photo/delete/\"+selectedImageId,{headers: authHeader() }).then (response => {\r\n //fetchGallery()\r\n const newList = gallery.filter((item) => item.id !== selectedImageId);\r\n updateGallery(newList);\r\n setSelectedImage(\"\")\r\n\r\n console.log('delete image response',response)\r\n  }).catch(error => {\r\n    if(error.response){\r\n      if(error.response.status){\r\n           switch(error.response.status) {\r\n        case 500:\r\n            alert.show(error.response.statusText,{type: 'error'})\r\n          break;\r\n          case 401:\r\n            alert.show(\"Token error\",{type:'notice'})\r\n            setAuthModal(true)\r\n            setLoginAction(prevArticle=>{\r\n              return {...prevArticle,func:deletePhoto,params:selectedImageId}\r\n            })\r\n            \r\n          break;\r\n        default:\r\n            !error.response ? setSuccessMsg(\"Server currently down\"):\r\n            setSuccessMsg(error.response.statusText)\r\n      }     \r\n      }else{\r\n        setSuccessMsg(\"Server currently down\")\r\n      }\r\n    }else{\r\n      setSuccessMsg(\"Invalid response\")\r\n    }\r\n    // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n    // setErrors(prevError=>[...prevError,apiStatus])\r\n    \r\n});\r\n\r\n }\r\n\r\n\r\n\r\n const LoadMore=()=>{\r\n\r\n\r\npagination.next_page_url==null && setHasMore(false)\r\n\r\npagination.next_page_url!==null && axios.request( {\r\n    method: \"get\", \r\n    url: pagination.next_page_url, \r\n  }).then (response => {\r\n      //console.log(\"response file name\",response.data.data.data.data)\r\n    \r\n      updateGallery(prevGallery=>[\r\n        ...prevGallery,...response.data.data.data.data\r\n      ])\r\n\r\n      setPagination(prevArticle=>{\r\n        return {...prevArticle,...response.data.data.data}\r\n      })\r\n\r\n     // console.log(\"initial api fetch\",response)\r\n  })\r\n\r\n }\r\n\r\n\r\n\r\n\r\n\r\nconst onChange=(e)=>{\r\n  //console.log(e.target.value)\r\n  setUploadProgress(0)\r\n  let file=null\r\n  file = e.target.files[0] || e.dataTransfer.files[0];\r\n  e.target.value = \"\";\r\n  let allowed_mime_types = [ 'image/jpeg', 'image/png' ];\r\n  let allowed_size_mb = 2;\r\n  \r\n  if(allowed_mime_types.indexOf(file.type) == -1) {\r\n//alert('Error : Incorrect file type');\r\nsetSuccessMsg(\"Incorrect file type\")\r\n//alert.show(\"Incorrect file type\",{type: 'error',position:\"top right\",containerStyle:{zIndex: 4}})\r\nreturn;\r\n}\r\n\r\nif(file.size > allowed_size_mb*1024*1024) {\r\n//alert('Error : Exceeded size');\r\nsetSuccessMsg(\"Size limit of 2mb Exceeded\")\r\n//alert.show(\"Size limit of 1mb Exceeded\",{type: 'error',position:\"top right\"})\r\nreturn;\r\n}\r\n  //alert(\"on change for loading files\")\r\n  if (!file)\r\n  return;\r\n\r\n  // \r\n  setSuccessMsg(null)\r\n  setUploading(true)\r\n  //this.createImage(files[0]);\r\n  let reader = new FileReader();\r\n  reader.onload = (e) => {\r\n  //setImage(reader.result)\r\n  //console.log(reader.result)\r\n\r\n  };\r\n  reader.readAsDataURL(file);\r\n\r\n  let data = new FormData();\r\n\r\n  data.append(\"file\",file);\r\n  \r\n  axios.request( {\r\n      method: \"post\", \r\n      url: API_URL+\"photo/upload\", \r\n      data: data, \r\n      onUploadProgress: (p) => {\r\n         setUploadProgress(prevProgress=>prevProgress+Math.round((100 * p.loaded) / p.total))\r\n         //console.log(\"upload progress\",p.total/p.loaded)\r\n      }\r\n\r\n\r\n    }).then (response => {\r\n      updateGallery([])\r\n      //setHasMore(true)\r\n        // updateGallery(prevGallery=>[\r\n        //   ...prevGallery,...response.data.data.data.data\r\n        // ])\r\n\r\n        // setPagination(prevArticle=>{\r\n        //   return {...prevArticle,...response.data.data.data}\r\n        // })\r\n        //alert.show(\"Success\",{type: 'success'})\r\n        //console.log(\"Adding new image\",response.data.data.data)\r\n        //  updateGallery(prevGallery=>[\r\n        //   ...prevGallery,response.data.data.data\r\n        // ])\r\n        //fetchGallery()\r\n        let imageBig=PUBLIC_URL+response.data.data.data.img_big\r\n        const newList = gallery.splice(0, 0, response.data.data.data)\r\n        setSelectedImage(imageBig)\r\n        setSelectedImageId(response.data.data.data.id)\r\n        setFileType(response.data.data.data.file_type)\r\n        setFileName(response.data.data.data.file_original_name)\r\n        setFileSize(response.data.data.data.file_size)\r\n        setFileUploadedOn(response.data.data.data.created_at)\r\n        updateGallery(newList);\r\n        setUploading(false)\r\n        \r\n    }).catch(error => {\r\n      setUploading(false)\r\n      if(error.response){\r\n        if(error.response.status){\r\n             switch(error.response.status) {\r\n          case 500:\r\n              alert.show(error.response.statusText,{type: 'error'})\r\n            break;\r\n            case 401:\r\n              //alert.show(\"Token error\",{type:'notice'})\r\n              // setAuthModal(true)\r\n              // setLoginAction(prevArticle=>{\r\n              //   return {...prevArticle,func:fetchArticleByIdApi,params:id}\r\n              // })\r\n              \r\n            break;\r\n          default:\r\n              !error.response ? setSuccessMsg(\"Server currently down\"):\r\n              setSuccessMsg(error.response.statusText)\r\n        }     \r\n        }else{\r\n          setSuccessMsg(\"Server currently down\")\r\n        }\r\n      }else{\r\n        setSuccessMsg(\"Invalid response\")\r\n      }\r\n      // let apiStatus=error.response!==undefined ? error.response.statusText : \"Unknown error\"\r\n      // setErrors(prevError=>[...prevError,apiStatus])\r\n      \r\n  });\r\n}\r\n\r\n\r\n    \r\n    return (\r\n        <>\r\n      \r\n      <CModal\r\n      size=\"lg\"\r\n        show={modal}\r\n        onClose={()=>{setModal(!modal); setSuccessMsg(null)}}\r\n      >\r\n        <CModalHeader closeButton>\r\n        \r\n          <h3>Gallery</h3>  \r\n          </CModalHeader>\r\n        <CModalBody>\r\n          <CRow>\r\n              <CCol md=\"8\">\r\n                {\r\n              <>\r\n                    {\r\n                \r\n           gallery.length ?\r\n          <InfiniteScroll\r\n          dataLength={gallery.length}\r\n          next={()=>LoadMore()}\r\n          hasMore={hasMore}\r\n          loader={\"\"}\r\n         \r\n          scrollableTarget=\"scrollableDiv\"\r\n          endMessage={\r\n            <p style={{ textAlign: \"center\" }}>\r\n              <b></b>\r\n            </p>\r\n          }\r\n        >\r\n        {/* <div className=\"row\"> */}\r\n\r\n                 <div className=\"container\">\r\n                    <div className=\"container\" id=\"scrollableDiv\" style={{overflowY:\"auto\",height:\"370px\"}}>\r\n                      <div className=\"d-flex flex-row flex-wrap align-items-start\">\r\n          {\r\n\r\n            \r\n\r\n        gallery.length  && gallery.map((val, k) => {\r\n\r\n        let imgSmall=PUBLIC_URL+val.img_small\r\n        let imageBig=PUBLIC_URL+val.img_big\r\n\r\n        //alert(\"check\")\r\n          return (\r\n          <div className=\"col-md-4\" style={{padding:\"1em\",cursor:\"pointer\"}} key={k}>\r\n              <img src={imgSmall} className={'img-thumbnail'} onClick={() => {\r\n        //let imageSource=document.getElementById(\"modal-selected-image\").src.value=val\r\n                setSelectedImage(imageBig)\r\n                setSelectedImageId(val.id)\r\n                setFileType(val.file_type)\r\n                setFileName(val.file_original_name)\r\n                setFileSize(val.file_size)\r\n                setFileUploadedOn(val.created_at)\r\n              }} />\r\n          </div>\r\n          )\r\n          })\r\n          \r\n          }\r\n\r\n          {/* </div> */}\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </InfiniteScroll> :\"\"\r\n\r\n\r\n                    }\r\n\r\n\r\n\r\n\r\n               \r\n            </>\r\n        \r\n                  \r\n              \r\n\r\n             \r\n                 \r\n                }\r\n                \r\n                \r\n                {gallery.length ? \"Showing \":<h3>No images found</h3> } \r\n                <b>{gallery.length ? pagination.from:\"\"}</b>-<b>{gallery.length ? pagination.to:\"\"}</b> {gallery.length ? \"results of\":\"\"} <b>{gallery.length ? Math.ceil(pagination.total/pagination.per_page): \"\"  } {gallery.length ? \"pages\":\"\"}</b>  {hasMore ? <b>(scroll down for more images)</b>:\"\"}\r\n                \r\n\r\n              </CCol>\r\n\r\n\r\n              <CCol md=\"4\">\r\n              <img  className={'img-fluid'} id=\"modal-selected-image\" src={selectedImage!==\"\"?selectedImage:\"\"} />\r\n\r\n              {selectedImage!==\"\" && <p align=\"center\" id=\"acpb_ft_rm_fr\"><a href=\"\" style={Styles.link} id=\"acpb_del_ft\" className=\"acpb_featured_delete\" style={{color:\"red\",textDecoration:\"underline\"}} onClick={(e)=>{ e.preventDefault(); deletePhoto()} }>delete</a></p>} \r\n\r\n              {selectedImage!==\"\" && \r\n              <>\r\n              <p><b>File name:</b> {fileName}</p>\r\n              <p><b>File type:</b> {fileType}</p>\r\n              <p><b>File size:</b> {fileSize}kb</p>\r\n              <p><b>Uploaded on:</b> {fileUploadedOn}</p>\r\n              \r\n              </>}\r\n              </CCol>\r\n          </CRow>\r\n          <CRow className=\"d-flex flex-row justify-content-center\">\r\n              {/* <CCol md=\"8\">Left</CCol>\r\n              <CCol md=\"4\">Right</CCol> */}\r\n              \r\n              <CCol md=\"4\">\r\n              <br />\r\n              <br />\r\n              <input id=\"modal-upload-input\" type=\"file\"  hidden={true} onChange={(e)=>onChange(e)} />\r\n              {\r\n                uploading ? \r\n                    <button className=\"btn btn-primary px-4 w-100\"   disabled={uploading}>\r\n                      <span\r\n                        className=\"spinner-grow spinner-grow-sm\"\r\n                        role=\"status\"\r\n                        aria-hidden=\"true\"\r\n                      ></span>\r\n                      &nbsp; Uploading...\r\n                    </button> : <CButton id=\"modal-upload-bt\" color=\"primary\" size=\"md\" block md=\"12\">Add IMage</CButton>\r\n              }\r\n              \r\n              {/* ({uploadProgress}% uploaded) */}\r\n              <CProgress className=\"progress-xs\" color=\"success\" value={uploadProgress} />\r\n              {successMsg!==null && <b style={{color:\"red\"}} >{successMsg}</b>}\r\n              </CCol>\r\n          </CRow>\r\n        </CModalBody>\r\n        <CModalFooter>\r\n          <CButton color=\"primary\" onClick={()=>{\r\n            \r\n            if(featuredFor!==\"\") {\r\n              //setting featured image\r\n              setModal(prev=>!prev)\r\n              //console.log(\"selected Image\",selectedImage)\r\n              //console.log(\"Featured For\",featuredFor)\r\n              if(featuredFor==\"acpb_en_ft\"){\r\n                updateArticle(\"featured_en\",selectedImage)\r\n                setSelectedImageEn(selectedImage)\r\n              }else{\r\n                updateArticle(\"featured_fr\",selectedImage)\r\n                setSelectedImageFr(selectedImage)\r\n              }\r\n              \r\n               \r\n            }else{\r\n              //setting featured image\r\n              setModal(prev=>!prev)\r\n              selectedImage!==\"\" && setSelectedImageGlobal(selectedImage)\r\n\r\n            }\r\n            \r\n            }}>OK</CButton>{' '}\r\n\r\n          <CButton\r\n            color=\"secondary\"\r\n            onClick={()=>{setModal(!modal); setSuccessMsg(null)}}\r\n          >Cancel</CButton>\r\n        </CModalFooter>\r\n      </CModal>\r\n    </>\r\n           \r\n      )\r\n\r\n}\r\n\r\n\r\n\r\nexport default ModalMe"]},"metadata":{},"sourceType":"module"}